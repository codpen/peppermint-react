{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";import{Spin,Input,notification}from\"antd\";import{LockOutlined,EyeInvisibleOutlined,EyeTwoTone}from\"@ant-design/icons\";import logo from\"./logo.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),toggle=_useState8[0],setToggle=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var errorNotification=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var args;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return{message:\"Login Error\",description:[error],duration:3};case 2:args=_context.sent;_context.next=5;return notification.open(args);case 5:case\"end\":return _context.stop();}}},_callee);}));return function errorNotification(){return _ref.apply(this,arguments);};}();function signin(){return _signin.apply(this,arguments);}function _signin(){_signin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"/api/v1/auth/login\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})}).then(function(res){return res.json();}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(data);if(!(!data.error&&data.auth===true)){_context2.next=7;break;}localStorage.setItem(\"user\",JSON.stringify(data.user));setToggle(true);setTimeout(function(){history.push(\"/\");},1000);_context2.next=11;break;case 7:_context2.next=9;return setError(data.error);case 9:_context2.next=11;return errorNotification();case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}());case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 8:case\"end\":return _context3.stop();}}},_callee3,null,[[0,5]]);}));return _signin.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{class:\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(Spin,{spinning:toggle,children:[/*#__PURE__*/_jsxs(\"div\",{class:\"sm:mx-auto sm:w-full sm:max-w-md\",children:[/*#__PURE__*/_jsx(\"img\",{class:\"mx-auto h-24 w-auto\",src:logo,alt:\"logo hasnt loaded properly\"}),/*#__PURE__*/_jsx(\"h2\",{class:\"mt-2 text-center text-3xl font-extrabold text-gray-900\",children:\"Sign in to your account\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"mt-4 sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsx(\"div\",{class:\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{for:\"email\",class:\"block text-sm font-medium text-gray-700\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"div\",{class:\"mt-1\",children:/*#__PURE__*/_jsx(Input,{onChange:function onChange(e){return setEmail(e.target.value);},placeholder:\"Email\",id:\"email\",name:\"email\",type:\"email\",autocomplete:\"email\",required:true,className:\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{for:\"password\",class:\"block text-sm font-medium text-gray-700\",children:\"Password\"}),/*#__PURE__*/_jsx(\"div\",{class:\"mt-1\",children:/*#__PURE__*/_jsx(Input.Password,{prefix:/*#__PURE__*/_jsx(LockOutlined,{}),type:\"password\",placeholder:\"Password\",iconRender:function iconRender(visible){return visible?/*#__PURE__*/_jsx(EyeTwoTone,{}):/*#__PURE__*/_jsx(EyeInvisibleOutlined,{});},onChange:function onChange(e){return setPassword(e.target.value);},autocomplete:\"current-password\",required:true,className:\"px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setLoading(true);signin();},className:\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",children:\"Sign in\"})})]})})})]})})});};export default Login;","map":{"version":3,"sources":["C:/Users/japot/Desktop/Peppermint/Peppermint/client/src/pages/auth/Login.js"],"names":["React","useState","useHistory","Spin","Input","notification","LockOutlined","EyeInvisibleOutlined","EyeTwoTone","logo","Login","history","password","setPassword","email","setEmail","loading","setLoading","toggle","setToggle","error","setError","errorNotification","message","description","duration","args","open","signin","fetch","method","headers","body","JSON","stringify","then","res","json","data","console","log","auth","localStorage","setItem","user","setTimeout","push","e","target","value","visible"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Spin, Input, notification } from \"antd\";\r\nimport {\r\n  LockOutlined,\r\n  EyeInvisibleOutlined,\r\n  EyeTwoTone,\r\n} from \"@ant-design/icons\";\r\n\r\nimport logo from \"./logo.png\";\r\n\r\nconst Login = () => {\r\n  const history = useHistory();\r\n\r\n  const [password, setPassword] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [toggle, setToggle] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const errorNotification = async () => {\r\n    const args = await {\r\n      message: \"Login Error\",\r\n      description: [error],\r\n      duration: 3,\r\n    };\r\n    await notification.open(args);\r\n  };\r\n\r\n  async function signin() {\r\n    try {\r\n      await fetch(`/api/v1/auth/login`, {\r\n        method: \"post\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          email,\r\n          password,\r\n        }),\r\n      })\r\n        .then((res) => res.json())\r\n        .then(async (data) => {\r\n          console.log(data);\r\n          if (!data.error && data.auth === true) {\r\n            localStorage.setItem(\"user\", JSON.stringify(data.user));\r\n            setToggle(true);\r\n            setTimeout(() => {\r\n              history.push(\"/\");\r\n            }, 1000);\r\n          } else {\r\n            await setError(data.error)\r\n            // setLoading(false)\r\n            await errorNotification();\r\n\r\n          }\r\n        });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div class=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\r\n        <Spin spinning={toggle}>\r\n          <div class=\"sm:mx-auto sm:w-full sm:max-w-md\">\r\n            <img\r\n              class=\"mx-auto h-24 w-auto\"\r\n              src={logo}\r\n              alt=\"logo hasnt loaded properly\"\r\n            />\r\n            <h2 class=\"mt-2 text-center text-3xl font-extrabold text-gray-900\">\r\n              Sign in to your account\r\n            </h2>\r\n          </div>\r\n\r\n          <div class=\"mt-4 sm:mx-auto sm:w-full sm:max-w-md\">\r\n            <div class=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\r\n              <div class=\"space-y-6\">\r\n                <div>\r\n                  <label\r\n                    for=\"email\"\r\n                    class=\"block text-sm font-medium text-gray-700\"\r\n                  >\r\n                    Email address\r\n                  </label>\r\n                  <div class=\"mt-1\">\r\n                    <Input\r\n                      onChange={(e) => setEmail(e.target.value)}\r\n                      placeholder=\"Email\"\r\n                      id=\"email\"\r\n                      name=\"email\"\r\n                      type=\"email\"\r\n                      autocomplete=\"email\"\r\n                      required\r\n                      className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label\r\n                    for=\"password\"\r\n                    class=\"block text-sm font-medium text-gray-700\"\r\n                  >\r\n                    Password\r\n                  </label>\r\n                  <div class=\"mt-1\">\r\n                    <Input.Password\r\n                      prefix={<LockOutlined />}\r\n                      type=\"password\"\r\n                      placeholder=\"Password\"\r\n                      iconRender={(visible) =>\r\n                        visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />\r\n                      }\r\n                      onChange={(e) => setPassword(e.target.value)}\r\n                      autocomplete=\"current-password\"\r\n                      required\r\n                      className=\"px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <button\r\n                    onClick={() => {\r\n                      setLoading(true);\r\n                      signin();\r\n                    }}\r\n                    className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                  >\r\n                    Sign in\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Spin>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}
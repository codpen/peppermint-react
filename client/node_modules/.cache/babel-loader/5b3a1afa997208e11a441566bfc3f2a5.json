{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";import{HotKeys}from\"react-hotkeys\";import{Select,Form,Input,Radio,Space}from\"antd\";import{GlobalContext}from\"../../Context/GlobalState\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Create=function Create(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),company=_useState6[0],setCompany=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),engineer=_useState8[0],setEngineer=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),email=_useState10[0],setEmail=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),issue=_useState12[0],setIssue=_useState12[1];var _useState13=useState(\"Normal\"),_useState14=_slicedToArray(_useState13,2),priority=_useState14[0],setPriority=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),options=_useState16[0],setOptions=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),users=_useState18[0],setUsers=_useState18[1];var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useContext=useContext(GlobalContext),createTicket=_useContext.createTicket;var Option=Select.Option;var handlers={CLOSE:function CLOSE(){return setShow(false);}};var fetchClients=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/v1/client/allclients\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(res){if(res){setOptions(res.clients);}});case 2:case\"end\":return _context.stop();}}},_callee);}));return function fetchClients(){return _ref.apply(this,arguments);};}();function getUsers(){return _getUsers.apply(this,arguments);}function _getUsers(){_getUsers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"/api/v1/auth/getAllUsers\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(res){if(res){setUsers(res.users);}});case 3:res=_context3.sent;_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return _getUsers.apply(this,arguments);}useEffect(function(){fetchClients();getUsers();},[]);var search=options?options.map(function(d){return/*#__PURE__*/_jsx(Option,{children:d.name},d.id);}):/*#__PURE__*/_jsx(Option,{children:/*#__PURE__*/_jsx(\"p\",{children:\"Please refresh\"})},\"no_id\");var userSearch=users?users.map(function(d){return/*#__PURE__*/_jsxs(Option,{children:[d.firstName,\" \",d.lastName]},d.id);}):/*#__PURE__*/_jsx(Option,{children:/*#__PURE__*/_jsx(\"p\",{children:\"Please refresh\"})},\"no_id\");return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(HotKeys,{handlers:handlers,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return setShow(true);},type:\"button\",className:\"flex-shrink-0 p-3 text-cyan-200 rounded-full hover:text-white hover:bg-white hover:bg-opacity-10 focus:outline-none focus:ring-2 focus:ring-white\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"View notifications\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-white\",children:\"Create Ticket\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(show?'fixed z-10 inset-0 overflow-y-auto\" aria-labelledby=\"modal-title':\"hidden\"),\"aria-labelledby\":\"modal-title\",role:\"dialog\",\"aria-modal\":\"true\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(e){e.preventDefault();e.stopPropagation();setShow(false);},className:\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline-block sm:align-middle sm:h-screen\",\"aria-hidden\":\"true\",children:\"\\u200B\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl text-center m-2 p-2 font-bold\",children:\"New Ticket\"}),/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(Form,{size:\"middle\",form:form,layout:\"vertical\",name:\"form_in_modal\",initialValues:{modifier:\"public\"},children:[/*#__PURE__*/_jsx(Form.Item,{name:\"name\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",placeholder:\"Enter name here...\",name:\"name\",onChange:function onChange(e){return setName(e.target.value);},className:\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"email\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",placeholder:\"Enter email here....\",onChange:function onChange(e){return setEmail(e.target.value);},className:\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"Client\",children:/*#__PURE__*/_jsx(Select,{showSearch:true,placeholder:\"Select a client\",optionFilterProp:\"children\",onChange:setCompany,filterOption:function filterOption(input,option){return option.children.toLowerCase().indexOf(input.toLowerCase())>=0;},children:search})}),/*#__PURE__*/_jsx(Form.Item,{name:\"Eningeer\",children:/*#__PURE__*/_jsx(Select,{showSearch:true,placeholder:\"Select a engineer\",optionFilterProp:\"children\",onChange:setEngineer,filterOption:function filterOption(input,option){return option.children.toLowerCase().indexOf(input.toLowerCase())>=0;},children:userSearch})}),/*#__PURE__*/_jsx(Form.Item,{name:\"issue\",label:\"Issue\",children:/*#__PURE__*/_jsx(Input.TextArea,{rows:5,onChange:function onChange(e){return setIssue(e.target.value);}})}),/*#__PURE__*/_jsx(Form.Item,{name:\"modifier\",label:\"Priority\",className:\"flex justify-items-center items-center\",children:/*#__PURE__*/_jsx(Radio.Group,{buttonStyle:\"solid\",value:priority,onChange:function onChange(e){return setPriority(e.target.value);},className:\"mx-auto\",children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Radio.Button,{value:\"Low\",children:\"Low\"}),/*#__PURE__*/_jsx(Radio.Button,{value:\"Normal\",children:\"Normal\"}),/*#__PURE__*/_jsx(Radio.Button,{value:\"High\",className:\"bg-red\",children:\"High\"})]})})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return createTicket(name,email,company,issue,priority,engineer);case 2:e.stopPropagation();form.resetFields();setShow(false);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}(),type:\"button\",className:\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:col-start-2 sm:text-sm\",children:\"Create\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setShow(false);},type:\"button\",className:\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm\",children:\"Cancel\"})]})]})]})})]})});};export default Create;","map":{"version":3,"sources":["C:/Users/japot/Desktop/Peppermint/Peppermint/client/src/components/ticket/Create.js"],"names":["React","useState","useEffect","useContext","HotKeys","Select","Form","Input","Radio","Space","GlobalContext","Create","show","setShow","name","setName","company","setCompany","engineer","setEngineer","email","setEmail","issue","setIssue","priority","setPriority","options","setOptions","users","setUsers","useForm","form","createTicket","Option","handlers","CLOSE","fetchClients","fetch","method","headers","then","res","json","clients","getUsers","console","log","search","map","d","id","userSearch","firstName","lastName","e","preventDefault","stopPropagation","modifier","target","value","input","option","children","toLowerCase","indexOf","resetFields"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { HotKeys } from \"react-hotkeys\";\r\nimport { Select, Form, Input, Radio, Space } from \"antd\";\r\nimport { GlobalContext } from \"../../Context/GlobalState\";\r\n\r\nconst Create = () => {\r\n  const [show, setShow] = useState(false);\r\n  const [name, setName] = useState(\"\");\r\n  const [company, setCompany] = useState();\r\n  const [engineer, setEngineer] = useState();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [issue, setIssue] = useState(\"\");\r\n  const [priority, setPriority] = useState(\"Normal\");\r\n  const [options, setOptions] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [form] = Form.useForm();\r\n\r\n  const { createTicket } = useContext(GlobalContext);\r\n\r\n  const { Option } = Select;\r\n\r\n  const handlers = {\r\n    CLOSE: () => setShow(false),\r\n  };\r\n\r\n  const fetchClients = async () => {\r\n    await fetch(`/api/v1/client/allclients`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        if (res) {\r\n          setOptions(res.clients);\r\n        }\r\n      });\r\n  };\r\n\r\n  async function getUsers() {\r\n    try {\r\n      const res = await fetch(`/api/v1/auth/getAllUsers`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n        .then((res) => res.json())\r\n        .then((res) => {\r\n          if (res) {\r\n            setUsers(res.users);\r\n          }\r\n        });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchClients();\r\n    getUsers();\r\n  }, []);\r\n\r\n  const search = options ? (\r\n    options.map((d) => <Option key={d.id}>{d.name}</Option>)\r\n  ) : (\r\n    <Option key=\"no_id\">\r\n      <p>Please refresh</p>\r\n    </Option>\r\n  );\r\n\r\n  const userSearch = users ? (\r\n    users.map((d) => <Option key={d.id}>{d.firstName} {d.lastName}</Option>)\r\n  ) : (\r\n    <Option key=\"no_id\">\r\n      <p>Please refresh</p>\r\n    </Option>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <HotKeys handlers={handlers}>\r\n        <div>\r\n          <button\r\n            onClick={() => setShow(true)}\r\n            type=\"button\"\r\n            className=\"flex-shrink-0 p-3 text-cyan-200 rounded-full hover:text-white hover:bg-white hover:bg-opacity-10 focus:outline-none focus:ring-2 focus:ring-white\"\r\n          >\r\n            <span className=\"sr-only\">View notifications</span>\r\n            <span className=\"text-white\">Create Ticket</span>\r\n          </button>\r\n        </div>\r\n\r\n        <div\r\n          className={`${\r\n            show\r\n              ? 'fixed z-10 inset-0 overflow-y-auto\" aria-labelledby=\"modal-title'\r\n              : \"hidden\"\r\n          }`}\r\n          aria-labelledby=\"modal-title\"\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n        >\r\n          <div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n            <div\r\n              onClick={(e) => {e.preventDefault(); e.stopPropagation(); setShow(false)}}\r\n              className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\"\r\n              aria-hidden=\"true\"\r\n            ></div>\r\n\r\n            <span\r\n              className=\"hidden sm:inline-block sm:align-middle sm:h-screen\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              &#8203;\r\n            </span>\r\n\r\n            <div className=\"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6\">\r\n              <div>\r\n                <h1 className=\"text-xl text-center m-2 p-2 font-bold\">\r\n                  New Ticket\r\n                </h1>\r\n                <Form>\r\n                  <Form\r\n                    size=\"middle\"\r\n                    form={form}\r\n                    layout=\"vertical\"\r\n                    name=\"form_in_modal\"\r\n                    initialValues={{\r\n                      modifier: \"public\",\r\n                    }}\r\n                  >\r\n                    <Form.Item name=\"name\">\r\n                      <input\r\n                        type=\"text\"\r\n                        id=\"name\"\r\n                        placeholder=\"Enter name here...\"\r\n                        name=\"name\"\r\n                        onChange={(e) => setName(e.target.value)}\r\n                        className=\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\r\n                      />\r\n                    </Form.Item>\r\n                    <Form.Item name=\"email\">\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"email\"\r\n                        placeholder=\"Enter email here....\"\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                        className=\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\r\n                      />\r\n                    </Form.Item>\r\n                    <Form.Item name=\"Client\">\r\n                      <Select\r\n                        showSearch\r\n                        placeholder=\"Select a client\"\r\n                        optionFilterProp=\"children\"\r\n                        onChange={setCompany}\r\n                        filterOption={(input, option) =>\r\n                          option.children\r\n                            .toLowerCase()\r\n                            .indexOf(input.toLowerCase()) >= 0\r\n                        }\r\n                      >\r\n                        {search}\r\n                      </Select>\r\n                    </Form.Item>\r\n                    <Form.Item name=\"Eningeer\">\r\n                      <Select\r\n                        showSearch\r\n                        placeholder=\"Select a engineer\"\r\n                        optionFilterProp=\"children\"\r\n                        onChange={setEngineer}\r\n                        filterOption={(input, option) =>\r\n                          option.children\r\n                            .toLowerCase()\r\n                            .indexOf(input.toLowerCase()) >= 0\r\n                        }\r\n                      >\r\n                        {userSearch}\r\n                      </Select>\r\n                    </Form.Item>\r\n                    <Form.Item name=\"issue\" label=\"Issue\">\r\n                      <Input.TextArea\r\n                        rows={5}\r\n                        onChange={(e) => setIssue(e.target.value)}\r\n                      />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                      name=\"modifier\"\r\n                      label=\"Priority\"\r\n                      className=\"flex justify-items-center items-center\"\r\n                    >\r\n                      <Radio.Group\r\n                        buttonStyle=\"solid\"\r\n                        value={priority}\r\n                        onChange={(e) => setPriority(e.target.value)}\r\n                        className=\"mx-auto\"\r\n                      >\r\n                        <Space>\r\n                          <Radio.Button value=\"Low\">Low</Radio.Button>\r\n                          <Radio.Button value=\"Normal\">Normal</Radio.Button>\r\n                          <Radio.Button value=\"High\" className=\"bg-red\">\r\n                            High\r\n                          </Radio.Button>\r\n                        </Space>\r\n                      </Radio.Group>\r\n                    </Form.Item>\r\n                  </Form>\r\n                </Form>\r\n              </div>\r\n              <div className=\"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense\">\r\n                <button\r\n                  onClick={async (e) => {                    \r\n                    await createTicket(\r\n                      name,\r\n                      email,\r\n                      company,\r\n                      issue,\r\n                      priority,\r\n                      engineer\r\n                    );\r\n                    e.stopPropagation();\r\n                    form.resetFields();\r\n                    setShow(false);                    \r\n                  }}\r\n                  type=\"button\"\r\n                  className=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:col-start-2 sm:text-sm\"\r\n                >\r\n                  Create\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    setShow(false);\r\n                  }}\r\n                  type=\"button\"\r\n                  className=\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </HotKeys>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Create;\r\n"]},"metadata":{},"sourceType":"module"}
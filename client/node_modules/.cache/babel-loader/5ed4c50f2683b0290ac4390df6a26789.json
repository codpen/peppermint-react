{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useHistory}from\"react-router-dom\";import io from\"socket.io-client\";import{Card,Statistic,List}from\"antd\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Main=function Main(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),unClaimed=_useState2[0],setUnClaimed=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),complete=_useState6[0],setComplete=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),online=_useState8[0],setOnline=_useState8[1];var _useState9=useState([].reverse()),_useState10=_slicedToArray(_useState9,2),text=_useState10[0],setText=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),data=_useState12[0],setData=_useState12[1];var history=useHistory();// console.log(data)\nuseEffect(function(){function soc(){return _soc.apply(this,arguments);}function _soc(){_soc=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var socket;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return io.connect(\"/\");case 2:socket=_context.sent;socket.on(\"visitor enters\",function(data){return setOnline({data:data});});socket.on(\"visitor exits\",function(data){return setOnline({data:data});});case 5:case\"end\":return _context.stop();}}},_callee);}));return _soc.apply(this,arguments);}soc();},[]);useEffect(function(){function soc(){return _soc2.apply(this,arguments);}function _soc2(){_soc2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var socket;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return io.connect(\"/\");case 2:socket=_context2.sent;socket.on(\"file\",function(data){return setText({data:data});});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _soc2.apply(this,arguments);}soc();},[]);useEffect(function(){function soc(){return _soc3.apply(this,arguments);}function _soc3(){_soc3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var socket;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return io.connect(\"/\");case 2:socket=_context3.sent;socket.on(\"stats\",function(data){return setData(data);});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _soc3.apply(this,arguments);}soc();},[]);useEffect(function(){function auth(){return _auth.apply(this,arguments);}function _auth(){_auth=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"/api/v1/auth/token\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\"}}).then(function(response){return response.json();}).then(function(response){console.log(response);var res=response;if(res.auth===false){history.push(\"/login\");}else{return console.log(\"logged in\");}});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return _auth.apply(this,arguments);}auth();// eslint-disable-next-line\n},[]);var fetchOpen=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return fetch(\"/api/v1/data/getallopen\",{method:\"get\",headers:{Authorization:\"Bearer \"+localStorage.getItem(\"jwt\"),ContentType:\"application/json\"}}).then(function(res){return res.json();}).then(function(result){setOpen(result.result);});case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function fetchOpen(){return _ref.apply(this,arguments);};}();var fetchClosed=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return fetch(\"/api/v1/data/getallcompleted\",{method:\"get\",headers:{Authorization:\"Bearer \"+localStorage.getItem(\"jwt\"),ContentType:\"application/json\"}}).then(function(res){return res.json();}).then(function(result){setComplete(result.result);});case 2:case\"end\":return _context6.stop();}}},_callee6);}));return function fetchClosed(){return _ref2.apply(this,arguments);};}();var fetchUnissued=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return fetch(\"/api/v1/data/unallocatedTickets\",{method:\"get\",headers:{Authorization:\"Bearer \"+localStorage.getItem(\"jwt\"),ContentType:\"application/json\"}}).then(function(res){return res.json();}).then(function(result){setUnClaimed(result.result);});case 2:case\"end\":return _context7.stop();}}},_callee7);}));return function fetchUnissued(){return _ref3.apply(this,arguments);};}();useEffect(function(){fetchOpen();fetchClosed();fetchUnissued();},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"main\",{className:\"relative z-0 overflow-y-auto focus:outline-none\",tabindex:\"0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"py-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold text-gray-900\",children:\"Dashboard\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row px-2 mx-auto justify-items-center \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ml-1\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Closed Tickets\",value:complete})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-1\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Open Tickets\",value:open})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-1\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Unissued Tickets\",value:unClaimed})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-1\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Online Users\",value:online.data})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-1\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"System OS\",value:data.system})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-1\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Cpu Count\",value:data.cpu})})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex py-1 px-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex:1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ml-1\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Cpu Load Average 5mins %\",value:data.loadAverage})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-1\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Uptime\",value:data.uptime})})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ml-1\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Free Memory MB\",value:data.freeMem})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-1\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Free Memory %\",value:data.freeMemPercentage})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-1\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Statistic,{title:\"Total Memory MB\",value:data.totalMem})})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex:2 ml-5 h-2/4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-2/4\",children:/*#__PURE__*/_jsx(List,{size:\"small\",bordered:true,dataSource:text.data,pagination:{defaultPageSize:10,showSizeChanger:true,pageSizeOptions:[\"15\",\"30\",\"40\"]},renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{children:item});}})})})]})]})]})})});};export default Main;","map":{"version":3,"sources":["C:/Users/japot/Desktop/Peppermint/Peppermint/client/src/pages/admin/Main.js"],"names":["React","useState","useEffect","useHistory","io","Card","Statistic","List","moment","Main","unClaimed","setUnClaimed","open","setOpen","complete","setComplete","online","setOnline","reverse","text","setText","data","setData","history","soc","connect","socket","on","auth","fetch","method","headers","Accept","then","response","json","console","log","res","push","fetchOpen","Authorization","localStorage","getItem","ContentType","result","fetchClosed","fetchUnissued","system","cpu","loadAverage","uptime","freeMem","freeMemPercentage","totalMem","defaultPageSize","showSizeChanger","pageSizeOptions","item"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport io from \"socket.io-client\";\r\nimport { Card, Statistic, List } from \"antd\";\r\nimport moment from \"moment\";\r\n\r\nconst Main = () => {\r\n  const [unClaimed, setUnClaimed] = useState();\r\n  const [open, setOpen] = useState();\r\n  const [complete, setComplete] = useState();\r\n  const [online, setOnline] = useState(0);\r\n  const [text, setText] = useState([].reverse());\r\n  const [data, setData] = useState([]);\r\n\r\n  const history = useHistory();\r\n\r\n  // console.log(data)\r\n\r\n  useEffect(() => {\r\n    async function soc() {\r\n      const socket = await io.connect(\"/\");\r\n      socket.on(\"visitor enters\", (data) => setOnline({ data }));\r\n      socket.on(\"visitor exits\", (data) => setOnline({ data }));\r\n    }\r\n    soc();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function soc() {\r\n      const socket = await io.connect(\"/\");\r\n      socket.on(\"file\", (data) => setText({ data }));\r\n    }\r\n    soc();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function soc() {\r\n      const socket = await io.connect(\"/\");\r\n      socket.on(\"stats\", (data) => setData(data));\r\n    }\r\n    soc();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function auth() {\r\n      await fetch(`/api/v1/auth/token`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Accept: \"application/json\",\r\n        },\r\n      })\r\n        .then((response) => response.json())\r\n        .then((response) => {\r\n          console.log(response);\r\n          const res = response;\r\n          if (res.auth === false) {\r\n            history.push(\"/login\");\r\n          } else {\r\n            return console.log(\"logged in\");\r\n          }\r\n        });\r\n    }\r\n    auth();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const fetchOpen = async () => {\r\n    await fetch(`/api/v1/data/getallopen`, {\r\n      method: \"get\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n        ContentType: \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        setOpen(result.result);\r\n      });\r\n  };\r\n\r\n  const fetchClosed = async () => {\r\n    await fetch(`/api/v1/data/getallcompleted`, {\r\n      method: \"get\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n        ContentType: \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        setComplete(result.result);\r\n      });\r\n  };\r\n\r\n  const fetchUnissued = async () => {\r\n    await fetch(`/api/v1/data/unallocatedTickets`, {\r\n      method: \"get\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n        ContentType: \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        setUnClaimed(result.result);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchOpen();\r\n    fetchClosed();\r\n    fetchUnissued();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <main\r\n        className=\"relative z-0 overflow-y-auto focus:outline-none\"\r\n        tabindex=\"0\"\r\n      >\r\n        <div className=\"py-6\">\r\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\r\n            <h1 className=\"text-2xl font-semibold text-gray-900\">Dashboard</h1>\r\n          </div>\r\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\r\n            <div className=\"py-4\">\r\n              <div className=\"flex flex-row px-2 mx-auto justify-items-center \">\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"Closed Tickets\" value={complete} />\r\n                  </Card>\r\n                </div>\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"Open Tickets\" value={open} />\r\n                  </Card>\r\n                </div>\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"Unissued Tickets\" value={unClaimed} />\r\n                  </Card>\r\n                </div>\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"Online Users\" value={online.data} />\r\n                  </Card>\r\n                </div>\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"System OS\" value={data.system} />\r\n                  </Card>\r\n                </div>\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"Cpu Count\" value={data.cpu} />\r\n                  </Card>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex py-1 px-3\">\r\n              <div className=\"flex:1\">\r\n                <div className=\"flex-col\">\r\n                  <div className=\"flex flex-row\">\r\n                    <div className=\"ml-1\">\r\n                      <Card>\r\n                        <Statistic\r\n                          title=\"Cpu Load Average 5mins %\"\r\n                          value={data.loadAverage}\r\n                        />\r\n                      </Card>\r\n                    </div>\r\n                    <div className=\"ml-1\">\r\n                      <Card>\r\n                        <Statistic title=\"Uptime\" value={data.uptime} />\r\n                      </Card>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex flex-row\">\r\n                  <div className=\"ml-1\">\r\n                    <Card>\r\n                      <Statistic title=\"Free Memory MB\" value={data.freeMem} />\r\n                    </Card>\r\n                  </div>\r\n                  <div className=\"ml-1\">\r\n                    <Card>\r\n                      <Statistic\r\n                        title=\"Free Memory %\"\r\n                        value={data.freeMemPercentage}\r\n                      />\r\n                    </Card>\r\n                  </div>\r\n                  <div className=\"ml-1\">\r\n                    <Card>\r\n                      <Statistic\r\n                        title=\"Total Memory MB\"\r\n                        value={data.totalMem}\r\n                      />\r\n                    </Card>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex:2 ml-5 h-2/4\">\r\n                <div className=\"h-2/4\">\r\n                  <List\r\n                    size=\"small\"\r\n                    bordered\r\n                    dataSource={text.data}\r\n                    pagination={{\r\n                      defaultPageSize: 10,\r\n                      showSizeChanger: true,\r\n                      pageSizeOptions: [\"15\", \"30\", \"40\"],\r\n                    }}\r\n                    renderItem={(item) => <List.Item>{item}</List.Item>}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n"]},"metadata":{},"sourceType":"module"}
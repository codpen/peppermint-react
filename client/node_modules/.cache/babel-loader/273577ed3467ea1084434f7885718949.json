{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\japot\\\\Desktop\\\\Peppermint\\\\Peppermint\\\\client\\\\src\\\\components\\\\ticket\\\\Create.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { HotKeys } from \"react-hotkeys\";\nimport { Select, Form, Input, Radio, Space } from \"antd\";\nimport { GlobalContext } from \"../../Context/GlobalState\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Create = () => {\n  _s();\n\n  const [show, setShow] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [company, setCompany] = useState();\n  const [engineer, setEngineer] = useState();\n  const [email, setEmail] = useState(\"\");\n  const [issue, setIssue] = useState(\"\");\n  const [priority, setPriority] = useState(\"Normal\");\n  const [options, setOptions] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [form] = Form.useForm();\n  const {\n    createTicket\n  } = useContext(GlobalContext);\n  const {\n    Option\n  } = Select;\n  const handlers = {\n    CLOSE: () => setShow(false)\n  };\n\n  const fetchClients = async () => {\n    await fetch(`/api/v1/client/allclients`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(res => {\n      if (res) {\n        setOptions(res.clients);\n      }\n    });\n  };\n\n  async function getUsers() {\n    try {\n      const res = await fetch(`/api/v1/auth/getAllUsers`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(res => res.json()).then(res => {\n        if (res) {\n          setUsers(res.users);\n        }\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  useEffect(() => {\n    fetchClients();\n    getUsers();\n  }, []);\n  const search = options ? options.map(d => /*#__PURE__*/_jsxDEV(Option, {\n    children: d.name\n  }, d.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 24\n  }, this)) : /*#__PURE__*/_jsxDEV(Option, {\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Please refresh\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)\n  }, \"no_id\", false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n  const userSearch = users ? users.map(d => /*#__PURE__*/_jsxDEV(Option, {\n    children: [d.firstName, \" \", d.lastName]\n  }, d.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 22\n  }, this)) : /*#__PURE__*/_jsxDEV(Option, {\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Please refresh\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)\n  }, \"no_id\", false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(HotKeys, {\n      handlers: handlers,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShow(true),\n          type: \"button\",\n          className: \"flex-shrink-0 p-3 text-cyan-200 rounded-full hover:text-white hover:bg-white hover:bg-opacity-10 focus:outline-none focus:ring-2 focus:ring-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"sr-only\",\n            children: \"View notifications\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-white\",\n            children: \"Create Ticket\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${show ? 'fixed z-10 inset-0 overflow-y-auto\" aria-labelledby=\"modal-title' : \"hidden\"}`,\n        \"aria-labelledby\": \"modal-title\",\n        role: \"dialog\",\n        \"aria-modal\": \"true\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: e => {\n              e.preventDefault();\n              e.stopPropagation();\n              setShow(false);\n            },\n            className: \"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\",\n            \"aria-hidden\": \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"hidden sm:inline-block sm:align-middle sm:h-screen\",\n            \"aria-hidden\": \"true\",\n            children: \"\\u200B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-xl text-center m-2 p-2 font-bold\",\n                children: \"New Ticket\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form, {\n                children: /*#__PURE__*/_jsxDEV(Form, {\n                  size: \"middle\",\n                  form: form,\n                  layout: \"vertical\",\n                  name: \"form_in_modal\",\n                  initialValues: {\n                    modifier: \"public\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n                    name: \"name\",\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      id: \"name\",\n                      placeholder: \"Enter name here...\",\n                      name: \"name\",\n                      onChange: e => setName(e.target.value),\n                      className: \"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 135,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                    name: \"email\",\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      name: \"email\",\n                      placeholder: \"Enter email here....\",\n                      onChange: e => setEmail(e.target.value),\n                      className: \"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 145,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 144,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                    name: \"Client\",\n                    children: /*#__PURE__*/_jsxDEV(Select, {\n                      showSearch: true,\n                      placeholder: \"Select a client\",\n                      optionFilterProp: \"children\",\n                      onChange: setCompany,\n                      filterOption: (input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n                      children: search\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 154,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                    name: \"Eningeer\",\n                    children: /*#__PURE__*/_jsxDEV(Select, {\n                      showSearch: true,\n                      placeholder: \"Select a engineer\",\n                      optionFilterProp: \"children\",\n                      onChange: setEngineer,\n                      filterOption: (input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n                      children: userSearch\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 169,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                    name: \"issue\",\n                    label: \"Issue\",\n                    children: /*#__PURE__*/_jsxDEV(Input.TextArea, {\n                      rows: 5,\n                      onChange: e => setIssue(e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 184,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                    name: \"modifier\",\n                    label: \"Priority\",\n                    className: \"flex justify-items-center items-center\",\n                    children: /*#__PURE__*/_jsxDEV(Radio.Group, {\n                      buttonStyle: \"solid\",\n                      value: priority,\n                      onChange: e => setPriority(e.target.value),\n                      className: \"mx-auto\",\n                      children: /*#__PURE__*/_jsxDEV(Space, {\n                        children: [/*#__PURE__*/_jsxDEV(Radio.Button, {\n                          value: \"Low\",\n                          children: \"Low\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 201,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(Radio.Button, {\n                          value: \"Normal\",\n                          children: \"Normal\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 202,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(Radio.Button, {\n                          value: \"High\",\n                          className: \"bg-red\",\n                          children: \"High\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 203,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 200,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 194,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 189,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: async e => {\n                  await createTicket(name, email, company, issue, priority, engineer);\n                  e.stopPropagation();\n                  form.resetFields();\n                  setShow(false);\n                },\n                type: \"button\",\n                className: \"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:col-start-2 sm:text-sm\",\n                children: \"Create\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setShow(false);\n                },\n                type: \"button\",\n                className: \"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm\",\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Create, \"kNVISuBHOSBy2FFOerGD/EImuUo=\", false, function () {\n  return [Form.useForm];\n});\n\n_c = Create;\nexport default Create;\n\nvar _c;\n\n$RefreshReg$(_c, \"Create\");","map":{"version":3,"sources":["C:/Users/japot/Desktop/Peppermint/Peppermint/client/src/components/ticket/Create.js"],"names":["React","useState","useEffect","useContext","HotKeys","Select","Form","Input","Radio","Space","GlobalContext","Create","show","setShow","name","setName","company","setCompany","engineer","setEngineer","email","setEmail","issue","setIssue","priority","setPriority","options","setOptions","users","setUsers","form","useForm","createTicket","Option","handlers","CLOSE","fetchClients","fetch","method","headers","then","res","json","clients","getUsers","error","console","log","search","map","d","id","userSearch","firstName","lastName","e","preventDefault","stopPropagation","modifier","target","value","input","option","children","toLowerCase","indexOf","resetFields"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { HotKeys } from \"react-hotkeys\";\r\nimport { Select, Form, Input, Radio, Space } from \"antd\";\r\nimport { GlobalContext } from \"../../Context/GlobalState\";\r\n\r\nconst Create = () => {\r\n  const [show, setShow] = useState(false);\r\n  const [name, setName] = useState(\"\");\r\n  const [company, setCompany] = useState();\r\n  const [engineer, setEngineer] = useState();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [issue, setIssue] = useState(\"\");\r\n  const [priority, setPriority] = useState(\"Normal\");\r\n  const [options, setOptions] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [form] = Form.useForm();\r\n\r\n  const { createTicket } = useContext(GlobalContext);\r\n\r\n  const { Option } = Select;\r\n\r\n  const handlers = {\r\n    CLOSE: () => setShow(false),\r\n  };\r\n\r\n  const fetchClients = async () => {\r\n    await fetch(`/api/v1/client/allclients`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        if (res) {\r\n          setOptions(res.clients);\r\n        }\r\n      });\r\n  };\r\n\r\n  async function getUsers() {\r\n    try {\r\n      const res = await fetch(`/api/v1/auth/getAllUsers`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n        .then((res) => res.json())\r\n        .then((res) => {\r\n          if (res) {\r\n            setUsers(res.users);\r\n          }\r\n        });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchClients();\r\n    getUsers();\r\n  }, []);\r\n\r\n  const search = options ? (\r\n    options.map((d) => <Option key={d.id}>{d.name}</Option>)\r\n  ) : (\r\n    <Option key=\"no_id\">\r\n      <p>Please refresh</p>\r\n    </Option>\r\n  );\r\n\r\n  const userSearch = users ? (\r\n    users.map((d) => <Option key={d.id}>{d.firstName} {d.lastName}</Option>)\r\n  ) : (\r\n    <Option key=\"no_id\">\r\n      <p>Please refresh</p>\r\n    </Option>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <HotKeys handlers={handlers}>\r\n        <div>\r\n          <button\r\n            onClick={() => setShow(true)}\r\n            type=\"button\"\r\n            className=\"flex-shrink-0 p-3 text-cyan-200 rounded-full hover:text-white hover:bg-white hover:bg-opacity-10 focus:outline-none focus:ring-2 focus:ring-white\"\r\n          >\r\n            <span className=\"sr-only\">View notifications</span>\r\n            <span className=\"text-white\">Create Ticket</span>\r\n          </button>\r\n        </div>\r\n\r\n        <div\r\n          className={`${\r\n            show\r\n              ? 'fixed z-10 inset-0 overflow-y-auto\" aria-labelledby=\"modal-title'\r\n              : \"hidden\"\r\n          }`}\r\n          aria-labelledby=\"modal-title\"\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n        >\r\n          <div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n            <div\r\n              onClick={(e) => {e.preventDefault(); e.stopPropagation(); setShow(false)}}\r\n              className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\"\r\n              aria-hidden=\"true\"\r\n            ></div>\r\n\r\n            <span\r\n              className=\"hidden sm:inline-block sm:align-middle sm:h-screen\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              &#8203;\r\n            </span>\r\n\r\n            <div className=\"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6\">\r\n              <div>\r\n                <h1 className=\"text-xl text-center m-2 p-2 font-bold\">\r\n                  New Ticket\r\n                </h1>\r\n                <Form>\r\n                  <Form\r\n                    size=\"middle\"\r\n                    form={form}\r\n                    layout=\"vertical\"\r\n                    name=\"form_in_modal\"\r\n                    initialValues={{\r\n                      modifier: \"public\",\r\n                    }}\r\n                  >\r\n                    <Form.Item name=\"name\">\r\n                      <input\r\n                        type=\"text\"\r\n                        id=\"name\"\r\n                        placeholder=\"Enter name here...\"\r\n                        name=\"name\"\r\n                        onChange={(e) => setName(e.target.value)}\r\n                        className=\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\r\n                      />\r\n                    </Form.Item>\r\n                    <Form.Item name=\"email\">\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"email\"\r\n                        placeholder=\"Enter email here....\"\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                        className=\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\r\n                      />\r\n                    </Form.Item>\r\n                    <Form.Item name=\"Client\">\r\n                      <Select\r\n                        showSearch\r\n                        placeholder=\"Select a client\"\r\n                        optionFilterProp=\"children\"\r\n                        onChange={setCompany}\r\n                        filterOption={(input, option) =>\r\n                          option.children\r\n                            .toLowerCase()\r\n                            .indexOf(input.toLowerCase()) >= 0\r\n                        }\r\n                      >\r\n                        {search}\r\n                      </Select>\r\n                    </Form.Item>\r\n                    <Form.Item name=\"Eningeer\">\r\n                      <Select\r\n                        showSearch\r\n                        placeholder=\"Select a engineer\"\r\n                        optionFilterProp=\"children\"\r\n                        onChange={setEngineer}\r\n                        filterOption={(input, option) =>\r\n                          option.children\r\n                            .toLowerCase()\r\n                            .indexOf(input.toLowerCase()) >= 0\r\n                        }\r\n                      >\r\n                        {userSearch}\r\n                      </Select>\r\n                    </Form.Item>\r\n                    <Form.Item name=\"issue\" label=\"Issue\">\r\n                      <Input.TextArea\r\n                        rows={5}\r\n                        onChange={(e) => setIssue(e.target.value)}\r\n                      />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                      name=\"modifier\"\r\n                      label=\"Priority\"\r\n                      className=\"flex justify-items-center items-center\"\r\n                    >\r\n                      <Radio.Group\r\n                        buttonStyle=\"solid\"\r\n                        value={priority}\r\n                        onChange={(e) => setPriority(e.target.value)}\r\n                        className=\"mx-auto\"\r\n                      >\r\n                        <Space>\r\n                          <Radio.Button value=\"Low\">Low</Radio.Button>\r\n                          <Radio.Button value=\"Normal\">Normal</Radio.Button>\r\n                          <Radio.Button value=\"High\" className=\"bg-red\">\r\n                            High\r\n                          </Radio.Button>\r\n                        </Space>\r\n                      </Radio.Group>\r\n                    </Form.Item>\r\n                  </Form>\r\n                </Form>\r\n              </div>\r\n              <div className=\"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense\">\r\n                <button\r\n                  onClick={async (e) => {                    \r\n                    await createTicket(\r\n                      name,\r\n                      email,\r\n                      company,\r\n                      issue,\r\n                      priority,\r\n                      engineer\r\n                    );\r\n                    e.stopPropagation();\r\n                    form.resetFields();\r\n                    setShow(false);                    \r\n                  }}\r\n                  type=\"button\"\r\n                  className=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:col-start-2 sm:text-sm\"\r\n                >\r\n                  Create\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    setShow(false);\r\n                  }}\r\n                  type=\"button\"\r\n                  className=\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </HotKeys>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Create;\r\n"]},"metadata":{},"sourceType":"module"}
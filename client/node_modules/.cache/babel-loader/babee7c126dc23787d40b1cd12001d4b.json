{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\japot\\\\Desktop\\\\Peppermint\\\\Peppermint\\\\client\\\\src\\\\components\\\\ticket\\\\File.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Space, Button } from \"antd\";\nimport fileDownload from \"js-file-download\";\nimport axios from \"axios\";\nimport { FileTwoTone, MinusCircleTwoTone, UploadOutlined } from \"@ant-design/icons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst File = props => {\n  _s();\n\n  const [files, setFiles] = useState([]);\n\n  async function getFiles() {\n    const id = props.ticket._id;\n    await fetch(`/api/v1/tickets/file/listFiles/${id}`, {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(res => {\n      console.log(res);\n      setFiles(res.files);\n    });\n  }\n\n  async function deleteFile(file) {\n    await fetch(`/api/v1/tickets/file/del`, {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        file: file._id,\n        ticket: props.ticket._id,\n        path: file.path\n      })\n    }).then(res => res.json()).then(res => {\n      console.log(res);\n      setFiles(res.files);\n    });\n  }\n\n  function download(file) {\n    const url = `/api/v1/tickets/file/download`;\n    let data = new FormData();\n    data.append(\"filepath\", file.path);\n    axios.post(url, data, {\n      responseType: \"blob\"\n    }).then(res => {\n      fileDownload(res.data, file.filename);\n    });\n  }\n\n  useEffect(() => {\n    getFiles();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: files.map(file => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"todo-list\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(Space, {\n              children: [/*#__PURE__*/_jsxDEV(FileTwoTone, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: file.filename\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                ghost: true,\n                style: {\n                  float: \"right\"\n                },\n                onClick: e => {\n                  e.stopPropagation();\n                  deleteFile(file);\n                },\n                children: /*#__PURE__*/_jsxDEV(MinusCircleTwoTone, {\n                  twoToneColor: \"#FF0000\\t\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 83,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                ghost: true,\n                onClick: async e => {\n                  e.stopPropagation();\n                  download(file);\n                },\n                children: /*#__PURE__*/_jsxDEV(UploadOutlined, {\n                  style: {\n                    color: \"black\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this)\n      }, file._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n\n_s(File, \"Q2RYUcr07MgGv5yVCV31YurpQrA=\");\n\n_c = File;\nexport default File;\n\nvar _c;\n\n$RefreshReg$(_c, \"File\");","map":{"version":3,"sources":["C:/Users/japot/Desktop/Peppermint/Peppermint/client/src/components/ticket/File.js"],"names":["React","useState","useEffect","Space","Button","fileDownload","axios","FileTwoTone","MinusCircleTwoTone","UploadOutlined","File","props","files","setFiles","getFiles","id","ticket","_id","fetch","method","headers","then","res","json","console","log","deleteFile","file","body","JSON","stringify","path","download","url","data","FormData","append","post","responseType","filename","map","float","e","stopPropagation","color"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,MAA9B;AACA,OAAOC,YAAP,MAAyB,kBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SACEC,WADF,EAEEC,kBAFF,EAGEC,cAHF,QAIO,mBAJP;;;AAMA,MAAMC,IAAI,GAAIC,KAAD,IAAW;AAAA;;AACtB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBZ,QAAQ,CAAC,EAAD,CAAlC;;AAEA,iBAAea,QAAf,GAA0B;AACxB,UAAMC,EAAE,GAAGJ,KAAK,CAACK,MAAN,CAAaC,GAAxB;AACA,UAAMC,KAAK,CAAE,kCAAiCH,EAAG,EAAtC,EAAyC;AAClDI,MAAAA,MAAM,EAAE,KAD0C;AAElDC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AAFyC,KAAzC,CAAL,CAMHC,IANG,CAMGC,GAAD,IAASA,GAAG,CAACC,IAAJ,EANX,EAOHF,IAPG,CAOGC,GAAD,IAAS;AACbE,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACAT,MAAAA,QAAQ,CAACS,GAAG,CAACV,KAAL,CAAR;AACD,KAVG,CAAN;AAWD;;AAED,iBAAec,UAAf,CAA0BC,IAA1B,EAAgC;AAC9B,UAAMT,KAAK,CAAE,0BAAF,EAA6B;AACtCC,MAAAA,MAAM,EAAE,MAD8B;AAEtCC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAF6B;AAKtCQ,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBH,QAAAA,IAAI,EAAEA,IAAI,CAACV,GADQ;AAEnBD,QAAAA,MAAM,EAAEL,KAAK,CAACK,MAAN,CAAaC,GAFF;AAGnBc,QAAAA,IAAI,EAAEJ,IAAI,CAACI;AAHQ,OAAf;AALgC,KAA7B,CAAL,CAWHV,IAXG,CAWGC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAXX,EAYHF,IAZG,CAYGC,GAAD,IAAS;AACbE,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACAT,MAAAA,QAAQ,CAACS,GAAG,CAACV,KAAL,CAAR;AACD,KAfG,CAAN;AAgBD;;AAED,WAASoB,QAAT,CAAkBL,IAAlB,EAAwB;AACtB,UAAMM,GAAG,GAAI,+BAAb;AACA,QAAIC,IAAI,GAAG,IAAIC,QAAJ,EAAX;AACAD,IAAAA,IAAI,CAACE,MAAL,CAAY,UAAZ,EAAwBT,IAAI,CAACI,IAA7B;AACAzB,IAAAA,KAAK,CACF+B,IADH,CACQJ,GADR,EACaC,IADb,EACmB;AACfI,MAAAA,YAAY,EAAE;AADC,KADnB,EAIGjB,IAJH,CAISC,GAAD,IAAS;AACbjB,MAAAA,YAAY,CAACiB,GAAG,CAACY,IAAL,EAAWP,IAAI,CAACY,QAAhB,CAAZ;AACD,KANH;AAOD;;AAEDrC,EAAAA,SAAS,CAAC,MAAM;AACdY,IAAAA,QAAQ;AACT,GAFQ,EAEN,EAFM,CAAT;AAIA,sBACE;AAAA,cACGF,KAAK,CAAC4B,GAAN,CAAWb,IAAD,IAAU;AACnB,0BACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,+BACE;AAAA,iCACE;AAAA,mCACE,QAAC,KAAD;AAAA,sCACE,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAA,0BAAOA,IAAI,CAACY;AAAZ;AAAA;AAAA;AAAA;AAAA,sBAFF,eAGE,QAAC,MAAD;AACE,gBAAA,KAAK,MADP;AAEE,gBAAA,KAAK,EAAE;AAAEE,kBAAAA,KAAK,EAAE;AAAT,iBAFT;AAGE,gBAAA,OAAO,EAAGC,CAAD,IAAO;AACdA,kBAAAA,CAAC,CAACC,eAAF;AACAjB,kBAAAA,UAAU,CAACC,IAAD,CAAV;AACD,iBANH;AAAA,uCAQE,QAAC,kBAAD;AAAoB,kBAAA,YAAY,EAAC;AAAjC;AAAA;AAAA;AAAA;AAAA;AARF;AAAA;AAAA;AAAA;AAAA,sBAHF,eAaE,QAAC,MAAD;AACE,gBAAA,KAAK,MADP;AAEE,gBAAA,OAAO,EAAE,MAAOe,CAAP,IAAa;AACpBA,kBAAAA,CAAC,CAACC,eAAF;AACAX,kBAAAA,QAAQ,CAACL,IAAD,CAAR;AACD,iBALH;AAAA,uCAOE,QAAC,cAAD;AAAgB,kBAAA,KAAK,EAAE;AAAEiB,oBAAAA,KAAK,EAAE;AAAT;AAAvB;AAAA;AAAA;AAAA;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA,sBAbF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF,SAAgCjB,IAAI,CAACV,GAArC;AAAA;AAAA;AAAA;AAAA,cADF;AA+BD,KAhCA;AADH;AAAA;AAAA;AAAA;AAAA,UADF;AAqCD,CA3FD;;GAAMP,I;;KAAAA,I;AA6FN,eAAeA,IAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Space, Button } from \"antd\";\r\nimport fileDownload from \"js-file-download\";\r\nimport axios from \"axios\";\r\nimport {\r\n  FileTwoTone,\r\n  MinusCircleTwoTone,\r\n  UploadOutlined,\r\n} from \"@ant-design/icons\";\r\n\r\nconst File = (props) => {\r\n  const [files, setFiles] = useState([]);\r\n\r\n  async function getFiles() {\r\n    const id = props.ticket._id;\r\n    await fetch(`/api/v1/tickets/file/listFiles/${id}`, {\r\n      method: \"get\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        console.log(res)\r\n        setFiles(res.files);\r\n      });\r\n  }\r\n\r\n  async function deleteFile(file) {\r\n    await fetch(`/api/v1/tickets/file/del`, {\r\n      method: \"post\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        file: file._id,\r\n        ticket: props.ticket._id,\r\n        path: file.path,\r\n      }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        console.log(res);\r\n        setFiles(res.files);\r\n      });\r\n  }\r\n\r\n  function download(file) {\r\n    const url = `/api/v1/tickets/file/download`;\r\n    let data = new FormData();\r\n    data.append(\"filepath\", file.path);\r\n    axios\r\n      .post(url, data, {\r\n        responseType: \"blob\",\r\n      })\r\n      .then((res) => {\r\n        fileDownload(res.data, file.filename);\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    getFiles();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      {files.map((file) => {\r\n        return (\r\n          <div className=\"todo-list\" key={file._id}>\r\n            <ul>\r\n              <li>\r\n                <Space>\r\n                  <FileTwoTone />\r\n                  <span>{file.filename}</span>\r\n                  <Button\r\n                    ghost\r\n                    style={{ float: \"right\" }}\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      deleteFile(file);\r\n                    }}\r\n                  >\r\n                    <MinusCircleTwoTone twoToneColor=\"#FF0000\t\" />\r\n                  </Button>\r\n                  <Button\r\n                    ghost\r\n                    onClick={async (e) => {\r\n                      e.stopPropagation();\r\n                      download(file);\r\n                    }}\r\n                  >\r\n                    <UploadOutlined style={{ color: \"black\" }} />\r\n                  </Button>\r\n                </Space>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default File;\r\n"]},"metadata":{},"sourceType":"module"}
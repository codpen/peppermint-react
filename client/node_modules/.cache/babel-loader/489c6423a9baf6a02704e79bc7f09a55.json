{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Space,Button}from\"antd\";import fileDownload from\"js-file-download\";import axios from\"axios\";import{FileTwoTone,MinusCircleTwoTone,UploadOutlined}from\"@ant-design/icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Files=function Files(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),files=_useState2[0],setFiles=_useState2[1];function getFiles(){return _getFiles.apply(this,arguments);}function _getFiles(){_getFiles=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"/api/v1/auth/file/listFiles\",{method:\"get\",headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(res){setFiles(res.files);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _getFiles.apply(this,arguments);}function deleteFile(_x){return _deleteFile.apply(this,arguments);}function _deleteFile(){_deleteFile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(file){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"/api/v1/auth/file/del\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({file:file.id,path:file.path})}).then(function(res){return res.json();}).then(function(res){setFiles(res.files);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return _deleteFile.apply(this,arguments);}function download(file){var url=\"/api/v1/auth/file/download\";var data=new FormData();data.append(\"filepath\",file.path);axios.post(url,data,{responseType:\"blob\"}).then(function(res){fileDownload(res.data,file.filename);});}useEffect(function(){getFiles();},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"flow-root p-5 mx-auto -mt-5 ml-1\",children:files?files.map(function(file){return/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(FileTwoTone,{}),/*#__PURE__*/_jsx(\"span\",{children:file.filename}),/*#__PURE__*/_jsx(Button,{ghost:true,style:{float:\"right\"},onClick:function onClick(e){e.stopPropagation();deleteFile(file);},children:/*#__PURE__*/_jsx(MinusCircleTwoTone,{twoToneColor:\"#FF0000\\t\"})}),/*#__PURE__*/_jsx(Button,{ghost:true,onClick:/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.stopPropagation();download(file);case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref.apply(this,arguments);};}(),children:/*#__PURE__*/_jsx(UploadOutlined,{style:{color:\"black\"}})})]})})})},file._id);}):/*#__PURE__*/_jsx(\"p\",{children:\"No files found\"})})});};export default Files;","map":{"version":3,"sources":["C:/Users/japot/Desktop/Peppermint/Peppermint/client/src/components/home/Files.js"],"names":["React","useState","useEffect","Space","Button","fileDownload","axios","FileTwoTone","MinusCircleTwoTone","UploadOutlined","Files","files","setFiles","getFiles","fetch","method","headers","then","res","json","deleteFile","file","body","JSON","stringify","id","path","download","url","data","FormData","append","post","responseType","filename","map","float","e","stopPropagation","color","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Space, Button } from \"antd\";\r\nimport fileDownload from \"js-file-download\";\r\nimport axios from \"axios\";\r\nimport {\r\n  FileTwoTone,\r\n  MinusCircleTwoTone,\r\n  UploadOutlined,\r\n} from \"@ant-design/icons\";\r\n\r\nconst Files = () => {\r\n\r\n  const [files, setFiles] = useState([]);\r\n\r\n  async function getFiles() {\r\n    await fetch(`/api/v1/auth/file/listFiles`, {\r\n      method: \"get\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        setFiles(res.files);\r\n      });\r\n  }\r\n\r\n  async function deleteFile(file) {\r\n    await fetch(`/api/v1/auth/file/del`, {\r\n      method: \"post\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        file: file.id,\r\n        path: file.path,\r\n      }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        setFiles(res.files);\r\n      });\r\n  }\r\n\r\n  function download(file) {\r\n    const url = `/api/v1/auth/file/download`;\r\n    let data = new FormData();\r\n    data.append(\"filepath\", file.path);\r\n    axios\r\n      .post(url, data, {\r\n        responseType: \"blob\",\r\n      })\r\n      .then((res) => {\r\n        fileDownload(res.data, file.filename);\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    getFiles();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flow-root p-5 mx-auto -mt-5 ml-1\">\r\n      {files ? files.map((file) => {\r\n        return (\r\n          <div className=\"w-full\" key={file._id}>\r\n            <ul>\r\n              <li>\r\n                <Space>\r\n                  <FileTwoTone />\r\n                  <span>{file.filename}</span>\r\n                  <Button\r\n                    ghost\r\n                    style={{ float: \"right\" }}\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      deleteFile(file);\r\n                    }}\r\n                  >\r\n                    <MinusCircleTwoTone twoToneColor=\"#FF0000\t\" />\r\n                  </Button>\r\n                  <Button\r\n                    ghost\r\n                    onClick={async (e) => {\r\n                      e.stopPropagation();\r\n                      download(file);\r\n                    }}\r\n                  >\r\n                    <UploadOutlined style={{ color: \"black\" }} />\r\n                  </Button>\r\n                </Space>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        );\r\n      }) : (\r\n        <p>No files found</p>\r\n      )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Files;\r\n"]},"metadata":{},"sourceType":"module"}
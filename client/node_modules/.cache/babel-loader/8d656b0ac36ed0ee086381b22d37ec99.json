{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useContext}from\"react\";import{Table,Space,Button,Popconfirm}from\"antd\";import{useHistory}from\"react-router-dom\";import{GlobalContext}from\"../../Context/GlobalState\";import Update from'../../components/client/Update';import Create from'../../components/client/Create';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Client=function Client(){var history=useHistory();var _useContext=useContext(GlobalContext),clients=_useContext.clients,getClients=_useContext.getClients;useEffect(function(){function auth(){return _auth.apply(this,arguments);}function _auth(){_auth=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/v1/auth/token\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\"}}).then(function(response){return response.json();}).then(function(response){var res=response;if(res.auth===false){history.push(\"/login\");}else{return console.log(\"logged in\");}});case 2:case\"end\":return _context.stop();}}},_callee);}));return _auth.apply(this,arguments);}auth();// eslint-disable-next-line\n},[]);useEffect(function(){getClients();// eslint-disable-next-line\n},[]);var deleteClient=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(client){var id;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:id=client._id;_context2.prev=1;_context2.next=4;return fetch(\"/api/v1/client/delete/\".concat(id),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\"}}).then(function(response){return response.json();});case 4:_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[1,6]]);}));return function deleteClient(_x){return _ref.apply(this,arguments);};}();var columns=[{title:\"Client Name\",dataIndex:\"name\",key:\"name\",width:150},{title:\"Contact Name\",dataIndex:\"contactName\",key:\"contactName\",width:150,responsive:[\"md\"]},{title:\"Contact Email\",dataIndex:\"email\",key:\"email\",width:50,responsive:[\"md\"]},{title:\"Contact Number\",dataIndex:\"number\",key:\"number\",width:75},{key:\"action\",responsive:[\"md\"],width:200,render:function render(record){return/*#__PURE__*/_jsxs(Space,{size:\"middle\",children:[/*#__PURE__*/_jsx(Update,{client:record}),/*#__PURE__*/_jsx(Popconfirm,{title:\"Are you sure you want to delete?\",onConfirm:function onConfirm(){return deleteClient(record);},children:/*#__PURE__*/_jsx(Button,{children:\"Delete\"})})]});}}];return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"main\",{className:\"relative z-0 overflow-y-auto focus:outline-none\",tabindex:\"0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row max-w-7xl mx-auto px-4 sm:px-6 md:px-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold text-gray-900\",children:\"Clients\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3\",children:/*#__PURE__*/_jsx(Create,{})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"py-4\",children:/*#__PURE__*/_jsx(Table,{dataSource:clients,columns:columns,Pagenation:false,pagination:{defaultPageSize:10,showSizeChanger:true,pageSizeOptions:[\"10\",\"20\",\"30\"]}})})})]})})});};export default Client;","map":{"version":3,"sources":["C:/Users/japot/Desktop/Peppermint/Peppermint/client/src/pages/admin/Client.js"],"names":["React","useEffect","useContext","Table","Space","Button","Popconfirm","useHistory","GlobalContext","Update","Create","Client","history","clients","getClients","auth","fetch","method","headers","Accept","then","response","json","res","push","console","log","deleteClient","client","id","_id","columns","title","dataIndex","key","width","responsive","render","record","defaultPageSize","showSizeChanger","pageSizeOptions"],"mappings":"iVAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,UAA3B,KAA6C,OAA7C,CACA,OAASC,KAAT,CAAgBC,KAAhB,CAAuBC,MAAvB,CAA+BC,UAA/B,KAAiD,MAAjD,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA,OAASC,aAAT,KAA8B,2BAA9B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,gCAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,gCAAnB,C,wFAGA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnB,GAAMC,CAAAA,OAAO,CAAGL,UAAU,EAA1B,CACA,gBAAgCL,UAAU,CAACM,aAAD,CAA1C,CAAQK,OAAR,aAAQA,OAAR,CAAiBC,UAAjB,aAAiBA,UAAjB,CAEAb,SAAS,CAAC,UAAM,SACCc,CAAAA,IADD,sHACd,yJACQC,CAAAA,KAAK,sBAAuB,CAChCC,MAAM,CAAE,KADwB,CAEhCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,MAAM,CAAE,kBAFD,CAFuB,CAAvB,CAAL,CAOHC,IAPG,CAOE,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EAPF,EAQHF,IARG,CAQE,SAACC,QAAD,CAAc,CAClB,GAAME,CAAAA,GAAG,CAAGF,QAAZ,CACA,GAAIE,GAAG,CAACR,IAAJ,GAAa,KAAjB,CAAwB,CACtBH,OAAO,CAACY,IAAR,CAAa,QAAb,EACD,CAFD,IAEO,CACL,MAAOC,CAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAP,CACD,CACF,CAfG,CADR,uDADc,uCAmBdX,IAAI,GACJ;AACD,CArBQ,CAqBN,EArBM,CAAT,CAuBAd,SAAS,CAAC,UAAM,CACda,UAAU,GACV;AACD,CAHQ,CAGN,EAHM,CAAT,CAKA,GAAMa,CAAAA,YAAY,0FAAG,kBAAOC,MAAP,6HACbC,EADa,CACRD,MAAM,CAACE,GADC,yCAGXd,CAAAA,KAAK,iCAA0Ba,EAA1B,EAAgC,CACzCZ,MAAM,CAAE,QADiC,CAEzCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,MAAM,CAAE,kBAFD,CAFgC,CAAhC,CAAL,CAMHC,IANG,CAME,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EANF,CAHW,0FAWjBG,OAAO,CAACC,GAAR,eAXiB,qEAAH,kBAAZC,CAAAA,YAAY,4CAAlB,CAeA,GAAMI,CAAAA,OAAO,CAAG,CACd,CACEC,KAAK,CAAE,aADT,CAEEC,SAAS,CAAE,MAFb,CAGEC,GAAG,CAAE,MAHP,CAIEC,KAAK,CAAE,GAJT,CADc,CAOd,CACEH,KAAK,CAAE,cADT,CAEEC,SAAS,CAAE,aAFb,CAGEC,GAAG,CAAE,aAHP,CAIEC,KAAK,CAAE,GAJT,CAKEC,UAAU,CAAE,CAAC,IAAD,CALd,CAPc,CAcd,CACEJ,KAAK,CAAE,eADT,CAEEC,SAAS,CAAE,OAFb,CAGEC,GAAG,CAAE,OAHP,CAIEC,KAAK,CAAE,EAJT,CAKEC,UAAU,CAAE,CAAC,IAAD,CALd,CAdc,CAqBd,CACEJ,KAAK,CAAE,gBADT,CAEEC,SAAS,CAAE,QAFb,CAGEC,GAAG,CAAE,QAHP,CAIEC,KAAK,CAAE,EAJT,CArBc,CA2Bd,CACED,GAAG,CAAE,QADP,CAEEE,UAAU,CAAE,CAAC,IAAD,CAFd,CAGED,KAAK,CAAE,GAHT,CAIEE,MAAM,CAAE,gBAACC,MAAD,qBACN,MAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,wBACI,KAAC,MAAD,EAAQ,MAAM,CAAEA,MAAhB,EADJ,cAEE,KAAC,UAAD,EACE,KAAK,CAAC,kCADR,CAEE,SAAS,CAAE,2BAAMX,CAAAA,YAAY,CAACW,MAAD,CAAlB,EAFb,uBAIE,KAAC,MAAD,qBAJF,EAFF,GADM,EAJV,CA3Bc,CAAhB,CA6CA,mBACE,kCACE,aACE,SAAS,CAAC,iDADZ,CAEE,QAAQ,CAAC,GAFX,uBAIE,aAAK,SAAS,CAAC,MAAf,wBACE,aAAK,SAAS,CAAC,sDAAf,wBACE,WAAI,SAAS,CAAC,sCAAd,qBADF,cAEE,YAAK,SAAS,CAAC,MAAf,uBACI,KAAC,MAAD,IADJ,EAFF,GADF,cAOE,YAAK,SAAS,CAAC,wCAAf,uBACE,YAAK,SAAS,CAAC,MAAf,uBACE,KAAC,KAAD,EACE,UAAU,CAAEzB,OADd,CAEE,OAAO,CAAEkB,OAFX,CAGE,UAAU,CAAE,KAHd,CAIE,UAAU,CAAE,CACVQ,eAAe,CAAE,EADP,CAEVC,eAAe,CAAE,IAFP,CAGVC,eAAe,CAAE,CAAC,IAAD,CAAO,IAAP,CAAa,IAAb,CAHP,CAJd,EADF,EADF,EAPF,GAJF,EADF,EADF,CA+BD,CA3HD,CA6HA,cAAe9B,CAAAA,MAAf","sourcesContent":["import React, { useEffect, useContext } from \"react\";\r\nimport { Table, Space, Button, Popconfirm } from \"antd\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { GlobalContext } from \"../../Context/GlobalState\";\r\n\r\nimport Update from '../../components/client/Update'\r\nimport Create from '../../components/client/Create'\r\n\r\n\r\nconst Client = () => {\r\n  const history = useHistory();\r\n  const { clients, getClients } = useContext(GlobalContext);\r\n\r\n  useEffect(() => {\r\n    async function auth() {\r\n      await fetch(`/api/v1/auth/token`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Accept: \"application/json\",\r\n        },\r\n      })\r\n        .then((response) => response.json())\r\n        .then((response) => {\r\n          const res = response;\r\n          if (res.auth === false) {\r\n            history.push(\"/login\");\r\n          } else {\r\n            return console.log(\"logged in\");\r\n          }\r\n        });\r\n    }\r\n    auth();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    getClients();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const deleteClient = async (client) => {\r\n    const id = client._id;\r\n    try {\r\n      await fetch(`/api/v1/client/delete/${id}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Accept: \"application/json\",\r\n        },\r\n      }).then((response) => response.json());\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Client Name\",\r\n      dataIndex: \"name\",\r\n      key: \"name\",\r\n      width: 150,\r\n    },\r\n    {\r\n      title: \"Contact Name\",\r\n      dataIndex: \"contactName\",\r\n      key: \"contactName\",\r\n      width: 150,\r\n      responsive: [\"md\"],\r\n    },\r\n    {\r\n      title: \"Contact Email\",\r\n      dataIndex: \"email\",\r\n      key: \"email\",\r\n      width: 50,\r\n      responsive: [\"md\"],\r\n    },\r\n    {\r\n      title: \"Contact Number\",\r\n      dataIndex: \"number\",\r\n      key: \"number\",\r\n      width: 75,\r\n    },\r\n    {\r\n      key: \"action\",\r\n      responsive: [\"md\"],\r\n      width: 200,\r\n      render: (record) => (\r\n        <Space size=\"middle\">\r\n            <Update client={record} />\r\n          <Popconfirm\r\n            title=\"Are you sure you want to delete?\"\r\n            onConfirm={() => deleteClient(record)}\r\n          >\r\n            <Button>Delete</Button>\r\n          </Popconfirm>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <main\r\n        className=\"relative z-0 overflow-y-auto focus:outline-none\"\r\n        tabindex=\"0\"\r\n      >\r\n        <div className=\"py-6\">\r\n          <div className=\"flex flex-row max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\r\n            <h1 className=\"text-2xl font-semibold text-gray-900\">Clients</h1>\r\n            <div className=\"ml-3\">\r\n                <Create />\r\n              </div>\r\n          </div>\r\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\r\n            <div className=\"py-4\">\r\n              <Table\r\n                dataSource={clients}\r\n                columns={columns}\r\n                Pagenation={false}\r\n                pagination={{\r\n                  defaultPageSize: 10,\r\n                  showSizeChanger: true,\r\n                  pageSizeOptions: [\"10\", \"20\", \"30\"],\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Client;\r\n"]},"metadata":{},"sourceType":"module"}
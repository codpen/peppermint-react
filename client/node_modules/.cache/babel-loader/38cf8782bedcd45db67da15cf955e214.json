{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{message}from\"antd\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(){var user=JSON.parse(localStorage.getItem(\"user\"));var _useState=useState(),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var success=function success(){message.success(\"Information updated!\");};var fail=function fail(){message.error(\"Information failed to update\");};function postData(){return _postData.apply(this,arguments);}function _postData(){_postData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"/api/v1/auth/profile\",{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name?name:user.name,email:email?email:user.email})}).then(function(res){return res.json();}).then(function(res){if(res.fail===false){localStorage.clear();localStorage.setItem(\"user\",JSON.stringify(res.user));success();}else{fail();}});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _postData.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"py-6 px-4 sm:p-6 lg:pb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg leading-6 font-medium text-gray-900\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"This information will be displayed publicly so be careful what you share.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 flex flex-col lg:flex-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{for:\"username\",className:\"block text-sm font-medium text-gray-700\",children:\"Username\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 rounded-md shadow-sm flex\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",id:\"username\",autocomplete:\"username\",className:\"focus:ring-light-blue-500 focus:border-light-blue-500 flex-grow block w-full min-w-0 rounded-none rounded-r-md sm:text-sm border-gray-300\",defaultValue:user.name,onChange:function onChange(e){return setName(e.target.value);}})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{for:\"username\",className:\"block text-sm font-medium text-gray-700\",children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 rounded-md shadow-sm flex\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",autocomplete:\"email\",className:\"focus:ring-light-blue-500 focus:border-light-blue-500 flex-grow block w-full min-w-0 rounded-none rounded-r-md sm:text-sm border-gray-300\",defaultValue:user.email,onChange:function onChange(e){return setEmail(e.target.value);}})})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 py-4 px-4 flex justify-end sm:px-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return postData();case 2:case\"end\":return _context.stop();}}},_callee);})),type:\"submit\",className:\"ml-5 bg-light-blue-700 border border-transparent rounded-md shadow-sm py-2 px-4 inline-flex justify-center text-sm font-medium text-white hover:bg-light-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-light-blue-500\",children:\"Save\"})})]});};export default Profile;","map":{"version":3,"sources":["C:/Users/japot/Desktop/Peppermint/Peppermint/client/src/components/settings/Profile.js"],"names":["React","useState","message","Profile","user","JSON","parse","localStorage","getItem","name","setName","email","setEmail","success","fail","error","postData","fetch","method","headers","body","stringify","then","res","json","clear","setItem","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { message } from \"antd\";\r\n\r\nconst Profile = () => {\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n  const [name, setName] = useState();\r\n  const [email, setEmail] = useState();\r\n\r\n  const success = () => {\r\n    message.success(\"Information updated!\");\r\n  };\r\n\r\n  const fail = () => {\r\n    message.error(\"Information failed to update\");\r\n  };\r\n\r\n  async function postData() {\r\n    await fetch(`/api/v1/auth/profile`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: name ? name : user.name,\r\n        email: email ? email : user.email,\r\n      }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        if (res.fail === false) {\r\n          localStorage.clear();\r\n          localStorage.setItem(\"user\", JSON.stringify(res.user));\r\n          success();\r\n        } else {\r\n          fail();\r\n        }\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"py-6 px-4 sm:p-6 lg:pb-8\">\r\n        <div>\r\n          <h2 className=\"text-lg leading-6 font-medium text-gray-900\">Profile</h2>\r\n          <p className=\"mt-1 text-sm text-gray-500\">\r\n            This information will be displayed publicly so be careful what you\r\n            share.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"mt-6 flex flex-col lg:flex-row\">\r\n          <div className=\"flex-grow space-y-6\">\r\n            <div>\r\n              <label\r\n                for=\"username\"\r\n                className=\"block text-sm font-medium text-gray-700\"\r\n              >\r\n                Username\r\n              </label>\r\n              <div className=\"mt-1 rounded-md shadow-sm flex\">\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"username\"\r\n                  id=\"username\"\r\n                  autocomplete=\"username\"\r\n                  className=\"focus:ring-light-blue-500 focus:border-light-blue-500 flex-grow block w-full min-w-0 rounded-none rounded-r-md sm:text-sm border-gray-300\"\r\n                  defaultValue={user.name}\r\n                  onChange={(e) => setName(e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <label\r\n                for=\"username\"\r\n                className=\"block text-sm font-medium text-gray-700\"\r\n              >\r\n                Email\r\n              </label>\r\n              <div className=\"mt-1 rounded-md shadow-sm flex\">\r\n                <input\r\n                  type=\"email\"\r\n                  name=\"email\"\r\n                  autocomplete=\"email\"\r\n                  className=\"focus:ring-light-blue-500 focus:border-light-blue-500 flex-grow block w-full min-w-0 rounded-none rounded-r-md sm:text-sm border-gray-300\"\r\n                  defaultValue={user.email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n      </div>\r\n\r\n      <div className=\"mt-4 py-4 px-4 flex justify-end sm:px-6\">\r\n        <button\r\n          onClick={async () => {\r\n            await postData()\r\n          } }\r\n          type=\"submit\"\r\n          className=\"ml-5 bg-light-blue-700 border border-transparent rounded-md shadow-sm py-2 px-4 inline-flex justify-center text-sm font-medium text-white hover:bg-light-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-light-blue-500\"\r\n        >\r\n          Save\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"]},"metadata":{},"sourceType":"module"}
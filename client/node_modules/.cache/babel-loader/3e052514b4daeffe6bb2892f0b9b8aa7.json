{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/japot/Desktop/Peppermint/Peppermint/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";import{Select,Modal,Button}from\"antd\";import{GlobalContext}from\"../../Context/GlobalState\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Transfer=function Transfer(props){var Option=Select.Option;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),id=_useState4[0],setId=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),visible=_useState6[0],setVisible=_useState6[1];var ticket=props.ticket.id;var _useContext=useContext(GlobalContext),transferTicket=_useContext.transferTicket;var fetchUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/v1/auth/getAllUsers\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(res){if(res){setUsers(res.users);}});case 2:case\"end\":return _context.stop();}}},_callee);}));return function fetchUsers(){return _ref.apply(this,arguments);};}();var onCreate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setVisible(false);_context2.next=3;return transferTicket(id,ticket);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function onCreate(){return _ref2.apply(this,arguments);};}();var onCancel=function onCancel(){setVisible(false);};useEffect(function(){fetchUsers();},[]);var search=users.map(function(d){return/*#__PURE__*/_jsxs(Option,{children:[d.firstName,\" \",d.lastName]},d.id);});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"inline-flex justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900\",onClick:function onClick(){setVisible(true);},children:\"Transfer\"}),/*#__PURE__*/_jsx(Modal,{visible:visible,onCancel:onCancel,onOk:onCreate,width:300,children:/*#__PURE__*/_jsx(Select,{style:{width:200},showSearch:true,placeholder:\"Select a user\",optionFilterProp:\"children\",onChange:setId,filterOption:function filterOption(input,option){return option.toLowerCase().indexOf(input.toLowerCase())>=0;},children:search})})]});};export default Transfer;","map":{"version":3,"sources":["C:/Users/japot/Desktop/Peppermint/Peppermint/client/src/components/ticket/Transfer.js"],"names":["React","useState","useEffect","useContext","Select","Modal","Button","GlobalContext","Transfer","props","Option","users","setUsers","id","setId","visible","setVisible","ticket","transferTicket","fetchUsers","fetch","method","headers","then","res","json","onCreate","onCancel","search","map","d","firstName","lastName","width","input","option","toLowerCase","indexOf"],"mappings":"2fAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,UAArC,KAAuD,OAAvD,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,MAAxB,KAAsC,MAAtC,CAEA,OAASC,aAAT,KAA8B,2BAA9B,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAW,CAC1B,GAAQC,CAAAA,MAAR,CAAmBN,MAAnB,CAAQM,MAAR,CACA,cAA0BT,QAAQ,CAAC,EAAD,CAAlC,wCAAOU,KAAP,eAAcC,QAAd,eACA,eAAoBX,QAAQ,EAA5B,yCAAOY,EAAP,eAAWC,KAAX,eACA,eAA8Bb,QAAQ,CAAC,KAAD,CAAtC,yCAAOc,OAAP,eAAgBC,UAAhB,eAEA,GAAMC,CAAAA,MAAM,CAAGR,KAAK,CAACQ,MAAN,CAAaJ,EAA5B,CAEA,gBAA2BV,UAAU,CAACI,aAAD,CAArC,CAAQW,cAAR,aAAQA,cAAR,CAEA,GAAMC,CAAAA,UAAU,0FAAG,yJACXC,CAAAA,KAAK,4BAA6B,CACtCC,MAAM,CAAE,KAD8B,CAEtCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAF6B,CAA7B,CAAL,CAMHC,IANG,CAME,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EANF,EAOHF,IAPG,CAOE,SAACC,GAAD,CAAS,CACb,GAAIA,GAAJ,CAAS,CACPZ,QAAQ,CAACY,GAAG,CAACb,KAAL,CAAR,CACD,CACF,CAXG,CADW,uDAAH,kBAAVQ,CAAAA,UAAU,0CAAhB,CAeA,GAAMO,CAAAA,QAAQ,2FAAG,wIACfV,UAAU,CAAC,KAAD,CAAV,CADe,uBAETE,CAAAA,cAAc,CAACL,EAAD,CAAKI,MAAL,CAFL,yDAAH,kBAARS,CAAAA,QAAQ,2CAAd,CAKA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrBX,UAAU,CAAC,KAAD,CAAV,CACD,CAFD,CAIAd,SAAS,CAAC,UAAM,CACdiB,UAAU,GACX,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMS,CAAAA,MAAM,CAAGjB,KAAK,CAACkB,GAAN,CAAU,SAACC,CAAD,qBACvB,MAAC,MAAD,YACGA,CAAC,CAACC,SADL,KACiBD,CAAC,CAACE,QADnB,GAAaF,CAAC,CAACjB,EAAf,CADuB,EAAV,CAAf,CAMA,mBACE,oCACE,eACE,SAAS,CAAC,sNADZ,CAEE,OAAO,CAAE,kBAAM,CACbG,UAAU,CAAC,IAAD,CAAV,CACD,CAJH,sBADF,cASE,KAAC,KAAD,EAAO,OAAO,CAAED,OAAhB,CAAyB,QAAQ,CAAEY,QAAnC,CAA6C,IAAI,CAAED,QAAnD,CAA6D,KAAK,CAAE,GAApE,uBACE,KAAC,MAAD,EACE,KAAK,CAAE,CAAEO,KAAK,CAAE,GAAT,CADT,CAEE,UAAU,KAFZ,CAGE,WAAW,CAAC,eAHd,CAIE,gBAAgB,CAAC,UAJnB,CAKE,QAAQ,CAAEnB,KALZ,CAME,YAAY,CAAE,sBAACoB,KAAD,CAAQC,MAAR,QACZA,CAAAA,MAAM,CAACC,WAAP,GAAqBC,OAArB,CAA6BH,KAAK,CAACE,WAAN,EAA7B,GAAqD,CADzC,EANhB,UAUGR,MAVH,EADF,EATF,GADF,CA0BD,CAtED,CAwEA,cAAepB,CAAAA,QAAf","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { Select, Modal, Button } from \"antd\";\r\n\r\nimport { GlobalContext } from \"../../Context/GlobalState\";\r\n\r\nconst Transfer = (props) => {\r\n  const { Option } = Select;\r\n  const [users, setUsers] = useState([]);\r\n  const [id, setId] = useState();\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  const ticket = props.ticket.id;\r\n\r\n  const { transferTicket } = useContext(GlobalContext);\r\n\r\n  const fetchUsers = async () => {\r\n    await fetch(`/api/v1/auth/getAllUsers`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        if (res) {\r\n          setUsers(res.users);\r\n        }\r\n      });\r\n  };\r\n\r\n  const onCreate = async () => {\r\n    setVisible(false);\r\n    await transferTicket(id, ticket);\r\n  };\r\n\r\n  const onCancel = () => {\r\n    setVisible(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const search = users.map((d) => (\r\n    <Option key={d.id}>\r\n      {d.firstName} {d.lastName}\r\n    </Option>\r\n  ));\r\n\r\n  return (\r\n    <div>\r\n      <button\r\n        className=\"inline-flex justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900\"\r\n        onClick={() => {\r\n          setVisible(true);\r\n        }}\r\n      >\r\n        Transfer\r\n      </button>\r\n      <Modal visible={visible} onCancel={onCancel} onOk={onCreate} width={300}>\r\n        <Select\r\n          style={{ width: 200 }}\r\n          showSearch\r\n          placeholder=\"Select a user\"\r\n          optionFilterProp=\"children\"\r\n          onChange={setId}\r\n          filterOption={(input, option) =>\r\n            option.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n          }\r\n        >\r\n          {search}\r\n        </Select>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Transfer;\r\n"]},"metadata":{},"sourceType":"module"}
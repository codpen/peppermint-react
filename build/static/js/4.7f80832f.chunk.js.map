{"version":3,"sources":["../node_modules/antd/es/row/index.js","components/users/Edit.js","components/users/Reset.js","components/users/Create.js","pages/admin/Auth.js"],"names":["Row","Edit","props","useState","user","users","name","setName","email","setEmail","role","setRole","visible","setVisible","postData","a","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","id","_id","then","res","json","onCreate","toString","toLowerCase","onClick","title","okText","cancelText","onCancel","onOk","type","className","defaultValue","onChange","e","target","value","Group","buttonStyle","Button","Reset","password","setPassword","f","failed","message","success","error","placeholder","Create","Form","useForm","form","createUser","useContext","GlobalContext","values","xmlns","viewBox","fill","aria-hidden","fill-rule","d","clip-rule","centered","validateFields","resetFields","catch","info","console","log","layout","initialValues","modifier","Item","label","rules","required","Auth","history","useHistory","getUsers","useEffect","Accept","response","auth","push","deleteClient","client","columns","dataIndex","key","responsive","render","text","record","size","onConfirm","tabindex","dataSource","pagination","defaultPageSize","showSizeChanger","pageSizeOptions"],"mappings":"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","file":"static/js/4.7f80832f.chunk.js","sourcesContent":["import { Row } from '../grid';\nexport default Row;","import React, { useState } from \"react\";\nimport { Modal, Space, Radio, Row, Button } from \"antd\";\n\nconst Edit = (props) => {\n  // eslint-disable-next-line\n  const [users, setUsers] = useState(props.user);\n  const [name, setName] = useState(props.user.name);\n  const [email, setEmail] = useState(props.user.email);\n  const [role, setRole] = useState(props.user.role);\n  const [visible, setVisible] = useState(false);\n\n  const postData = async () => {\n    await fetch(`/api/v1/auth/edit`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n      },\n      body: JSON.stringify({\n        id: users._id,\n        name,\n        email,\n        role,\n      }),\n    }).then((res) => res.json);\n  };\n\n  const onCreate = async () => {\n    setVisible(false);\n    email.toString(email);\n    email.toLowerCase();\n    await postData();\n  };\n\n  const onCancel = () => {\n    setVisible(false);\n  };\n\n  return (\n    <div>\n      <Button\n        onClick={() => {\n          setVisible(true);\n        }}\n      >\n        Edit User info & Role\n      </Button>\n      <Modal\n        visible={visible}\n        title=\"Edit a users info\"\n        okText=\"Update\"\n        cancelText=\"Cancel\"\n        onCancel={onCancel}\n        onOk={onCreate}\n      >\n        <Row>\n          <h5>\n            Edit Name :{\" \"}\n            <input\n              type=\"text\"\n              className=\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\n              defaultValue={users.name}\n              onChange={(e) => setName(e.target.value)}\n            />\n          </h5>\n        </Row>\n        <Row>\n          <h5>\n            Edit Email :{\" \"}\n            <input\n              type=\"text\"\n              className=\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\n              defaultValue={users.email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n          </h5>\n        </Row>\n          <h5>Edit Role : </h5>\n          <Radio.Group\n            buttonStyle=\"solid\"\n            defaultValue={users.role}\n            onChange={(e) => setRole(e.target.value)}\n          >\n            <Space>\n              <Radio.Button value=\"user\">User</Radio.Button>\n              <Radio.Button value=\"admin\">Admin</Radio.Button>\n            </Space>\n          </Radio.Group>\n      </Modal>\n    </div>\n  );\n};\n\nexport default Edit;\n","import React, { useState } from \"react\";\nimport { Modal, Button, message } from \"antd\";\n\nconst Reset = (props) => {\n  const [visible, setVisible] = useState(false);\n  const [user, setUser] = useState(props.user._id);\n  const [password, setPassword] = useState(\"\");\n\n  const success = () => {\n    message.success(\"Password updated\");\n  };\n\n  const fail = (f) => {\n    message.error(`${f}`);\n  };\n\n  const postData = async () => {\n    const id = user;\n    await fetch(`/api/v1/auth/resetPassword/${id}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n      },\n      body: JSON.stringify({\n        password,\n      }),\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        if (res.failed === false) {\n          success();\n        } else {\n          fail(res.message);\n        }\n      });\n  };\n\n  const onCreate = async () => {\n    setVisible(false);\n    await postData();\n  };\n\n  const onCancel = () => {\n    setVisible(false);\n  };\n\n  return (\n    <div>\n      <Button\n        onClick={() => {\n          setVisible(true);\n        }}\n      >\n        Reset password\n      </Button>\n      <Modal\n        visible={visible}\n        title=\"Reset users password\"\n        okText=\"Update\"\n        cancelText=\"Cancel\"\n        onCancel={onCancel}\n        onOk={onCreate}\n      >\n        <input\n          type=\"password\"\n          className=\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\n          onChange={(e) => setPassword(e.target.value)}\n          placeholder=\"Enter users new password\"\n        />\n      </Modal>\n    </div>\n  );\n};\n\nexport default Reset;\n","import React, { useState, useContext } from \"react\";\nimport { Modal, Form, Radio } from \"antd\";\n\nimport { GlobalContext } from \"../../Context/GlobalState\";\n\nconst Create = () => {\n  const [visible, setVisible] = useState(false);\n  const [form] = Form.useForm();\n\n  const [password, setPassword] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [name, setName] = useState(\"\");\n\n  const { createUser } = useContext(GlobalContext);\n\n  const onCreate = async (values) => {\n    setVisible(false);\n    await createUser(name, email, password);\n  };\n\n  const onCancel = () => {\n    setVisible(false);\n  };\n\n  return (\n    <div>\n      <button\n        onClick={() => setVisible(true)}\n        type=\"button\"\n        className=\"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n      >\n        <svg\n          className=\"h-5 w-5\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 20 20\"\n          fill=\"currentColor\"\n          aria-hidden=\"true\"\n        >\n          <path\n            fill-rule=\"evenodd\"\n            d=\"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z\"\n            clip-rule=\"evenodd\"\n          />\n        </svg>\n      </button>\n      <Modal\n        centered\n        visible={visible}\n        title=\"Create a new user\"\n        okText=\"Create\"\n        cancelText=\"Cancel\"\n        onCancel={onCancel}\n        onOk={() => {\n          form\n            .validateFields()\n            .then((values) => {\n              form.resetFields();\n              onCreate(values);\n            })\n            .catch((info) => {\n              console.log(\"Validate Failed:\", info);\n            });\n        }}\n      >\n        <Form\n          form={form}\n          layout=\"vertical\"\n          name=\"form_in_modal\"\n          initialValues={{\n            modifier: \"public\",\n          }}\n        >\n          <Form.Item\n            name=\"name\"\n            label=\"Name\"\n            rules={[\n              {\n                required: true,\n                message: \"Please input the name of your new user!\",\n              },\n            ]}\n          >\n            <input\n              type=\"text\"\n              className=\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\n              placeholder=\"Enter name here...\"\n              name=\"name\"\n              onChange={(e) => setName(e.target.value)}\n            />\n          </Form.Item>\n          <Form.Item name=\"email\" label=\"Email\">\n            <input\n              type=\"text\"\n              className=\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\n              placeholder=\"Enter email here....\"\n              onChange={(e) => setEmail(e.target.value)}\n            />\n          </Form.Item>\n          <Form.Item name=\"password\" label=\"Password\">\n            <input\n              type=\"password\"\n              className=\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\n              placeholder=\"Enter password here...\"\n              onChange={(e) => setPassword(e.target.value)}\n            />\n          </Form.Item>\n          <Form.Item\n            name=\"modifier\"\n            className=\"collection-create-form_last-form-item\"\n          >\n            <Radio.Group>\n              <Radio value=\"user\">User</Radio>\n              <Radio value=\"admin\">Admin</Radio>\n            </Radio.Group>\n          </Form.Item>\n        </Form>\n      </Modal>\n    </div>\n  );\n};\n\nexport default Create;\n","import React, { useEffect, useContext } from \"react\";\nimport { Space, Table, Button, Popconfirm } from \"antd\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { GlobalContext } from \"../../Context/GlobalState\";\n\nimport Edit from \"../../components/users/Edit\";\nimport Reset from \"../../components/users/Reset\";\nimport Create from \"../../components/users/Create\";\n\nconst Auth = () => {\n  const history = useHistory();\n  const { users, getUsers } = useContext(GlobalContext);\n\n  useEffect(() => {\n    async function auth() {\n      await fetch(`/api/v1/auth/token`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n        },\n      })\n        .then((response) => response.json())\n        .then((response) => {\n          console.log(response);\n          const res = response;\n          if (res.auth === false) {\n            history.push(\"/login\");\n          } else {\n            return console.log(\"logged in\");\n          }\n        });\n    }\n    auth();\n    // eslint-disable-next-line\n  }, []);\n\n  const deleteClient = async (client) => {\n    const id = client._id;\n    console.log(id);\n    try {\n      await fetch(`/api/v1/auth/delete/${id}`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n        },\n      }).then((response) => response.json());\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    getUsers();\n  }, []);\n\n  const columns = [\n    {\n      title: \"Name\",\n      dataIndex: \"name\",\n      key: \"name\",\n    },\n    {\n      title: \"Email\",\n      dataIndex: \"email\",\n      key: \"email\",\n    },\n    {\n      title: \"Role\",\n      dataIndex: \"role\",\n      key: \"role\",\n    },\n    {\n      key: \"action\",\n      responsive: [\"md\"],\n      render: (text, record) => (\n        <Space size=\"middle\">\n            <Edit user={record} />\n          <Popconfirm\n            title=\"Are you sure you want to delete?\"\n            onConfirm={() => deleteClient(record)}\n          >\n            <Button>Delete</Button>\n          </Popconfirm>\n          <Reset user={record} />\n        </Space>\n      ),\n    },\n  ];\n\n  return (\n    <div>\n      <div>\n        <main\n          className=\"relative z-0 overflow-y-auto focus:outline-none\"\n          tabindex=\"0\"\n        >\n          <div className=\"py-6\">\n            <div className=\"flex flex-row max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\n              <h1 className=\"text-2xl font-semibold text-gray-900\">\n              Internal Users\n              </h1>\n              <div className=\"ml-3\">\n                <Create />\n              </div>\n            </div>\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\n              <div className=\"py-4\">\n                <Table\n                  dataSource={users}\n                  columns={columns}\n                  pagination={{\n                    defaultPageSize: 10,\n                    showSizeChanger: true,\n                    pageSizeOptions: [\"10\", \"20\", \"30\"],\n                  }}\n                />\n              </div>\n            </div>\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n};\n\nexport default Auth;\n"],"sourceRoot":""}
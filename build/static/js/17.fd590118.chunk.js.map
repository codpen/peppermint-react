{"version":3,"sources":["hoc/CheckAuth.js"],"names":["CheckAuth","children","history","useHistory","useEffect","localStorage","getItem","push","a","fetch","method","headers","Accept","then","response","json","console","log","auth"],"mappings":"0JAyCeA,UAtCG,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACbC,EAAUC,cAkChB,OAhCAC,qBAAU,WACR,GAAqC,OAAjCC,aAAaC,QAAQ,QAGvB,OAAO,EAFPJ,EAAQK,KAAK,aAMjBH,qBAAU,WAAM,4CACd,sBAAAI,EAAA,sEACQC,MAAM,qBAAsB,CAChCC,OAAQ,MACRC,QAAS,CACP,eAAgB,mBAChBC,OAAQ,sBAGTC,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACC,GAGL,GAFAE,QAAQC,IAAIH,IAEK,IADLA,EACJI,KAGN,OAAOF,QAAQC,IAAI,aAFnBf,EAAQK,KAAK,aAbrB,4CADc,uBAAC,WAAD,wBAoBdW,KAEC,IAEI,8BAAMjB","file":"static/js/17.fd590118.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst CheckAuth = ({ children }) => {\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem(\"user\") === null) {\r\n      history.push(\"/login\");\r\n    } else {\r\n      return true;\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    async function auth() {\r\n      await fetch(`/api/v1/auth/token`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Accept: \"application/json\",\r\n        },\r\n      })\r\n        .then((response) => response.json())\r\n        .then((response) => {\r\n          console.log(response);\r\n          const res = response;\r\n          if (res.auth === false) {\r\n            history.push(\"/login\");\r\n          } else {\r\n            return console.log(\"logged in\");\r\n          }\r\n        });\r\n    }\r\n    auth();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return <div>{children}</div>;\r\n};\r\n\r\nexport default CheckAuth;\r\n"],"sourceRoot":""}
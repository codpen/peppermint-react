(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{373:function(e,t,n){"use strict";var a=n(219);t.a=a.a},398:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n.n(a),c=n(16),s=n(0),i=n(364),o=n(363),u=n(37),l=n(358),j=n(31),d=n(32),h=n(10),b=n(361),f=n(373),p=n(362),x=n(140),O=n(1),m=function(e){var t=Object(s.useState)(e.user),n=Object(h.a)(t,2),a=n[0],o=(n[1],Object(s.useState)(e.user.name)),l=Object(h.a)(o,2),j=l[0],d=l[1],m=Object(s.useState)(e.user.email),v=Object(h.a)(m,2),g=v[0],w=v[1],y=Object(s.useState)(e.user.role),C=Object(h.a)(y,2),k=C[0],S=C[1],E=Object(s.useState)(!1),N=Object(h.a)(E,2),T=N[0],I=N[1],z=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/auth/edit",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({id:a._id,name:j,email:g,role:k})}).then((function(e){return e.json}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!1),g.toString(g),g.toLowerCase(),e.next=5,z();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{children:[Object(O.jsx)(u.a,{onClick:function(){I(!0)},children:"Edit User info & Role"}),Object(O.jsxs)(b.a,{visible:T,title:"Edit a users info",okText:"Update",cancelText:"Cancel",onCancel:function(){I(!1)},onOk:U,children:[Object(O.jsx)(f.a,{children:Object(O.jsxs)("h5",{children:["Edit Name :"," ",Object(O.jsx)(p.a,{defaultValue:a.name,onChange:function(e){return d(e.target.value)},style:{width:300}})]})}),Object(O.jsx)(f.a,{children:Object(O.jsxs)("h5",{children:["Edit Email :"," ",Object(O.jsx)(p.a,{defaultValue:a.email,onChange:function(e){return w(e.target.value)},style:{width:300,marginLeft:5}})]})}),Object(O.jsxs)(f.a,{children:[Object(O.jsx)("h5",{children:"Edit Role : "}),Object(O.jsx)(x.a.Group,{buttonStyle:"solid",defaultValue:a.role,onChange:function(e){return S(e.target.value)},style:{marginLeft:20},children:Object(O.jsxs)(i.b,{children:[Object(O.jsx)(x.a.Button,{value:"user",children:"User"}),Object(O.jsx)(x.a.Button,{value:"admin",children:"Admin"})]})})]})]})]})},v=n(214),g=function(e){var t=Object(s.useState)(!1),n=Object(h.a)(t,2),a=n[0],i=n[1],o=Object(s.useState)(e.user._id),l=Object(h.a)(o,2),j=l[0],d=(l[1],Object(s.useState)("")),f=Object(h.a)(d,2),x=f[0],m=f[1],g=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j,e.next=3,fetch("/api/v1/auth/resetPassword/".concat(t),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({password:x})}).then((function(e){return e.json()})).then((function(e){var t;!1===e.failed?v.b.success("Password updated"):(t=e.message,v.b.error("".concat(t)))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!1),e.next=3,g();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{children:[Object(O.jsx)(u.a,{onClick:function(){i(!0)},children:"Reset password"}),Object(O.jsx)(b.a,{visible:a,title:"Reset users password",okText:"Update",cancelText:"Cancel",onCancel:function(){i(!1)},onOk:w,children:Object(O.jsx)(p.a,{onChange:function(e){return m(e.target.value)},placeholder:"Enter users new password"})})]})},w=n(360),y=function(){var e=Object(s.useState)(!1),t=Object(h.a)(e,2),n=t[0],a=t[1],i=w.a.useForm(),o=Object(h.a)(i,1)[0],u=Object(s.useState)(""),l=Object(h.a)(u,2),j=l[0],f=l[1],m=Object(s.useState)(""),v=Object(h.a)(m,2),g=v[0],y=v[1],C=Object(s.useState)(""),k=Object(h.a)(C,2),S=k[0],E=k[1],N=Object(s.useContext)(d.a).createUser,T=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!1),e.next=3,N(S,g,j);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{onClick:function(){return a(!0)},type:"button",className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:Object(O.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Object(O.jsx)("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})})}),Object(O.jsx)(b.a,{centered:!0,visible:n,title:"Create a new user",okText:"Create",cancelText:"Cancel",onCancel:function(){a(!1)},onOk:function(){o.validateFields().then((function(e){o.resetFields(),T(e)})).catch((function(e){console.log("Validate Failed:",e)}))},children:Object(O.jsxs)(w.a,{form:o,layout:"vertical",name:"form_in_modal",initialValues:{modifier:"public"},children:[Object(O.jsx)(w.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of your new user!"}],children:Object(O.jsx)(p.a,{placeholder:"Enter name here...",name:"name",onChange:function(e){return E(e.target.value)}})}),Object(O.jsx)(w.a.Item,{name:"email",label:"Email",children:Object(O.jsx)(p.a,{placeholder:"Enter email here....",onChange:function(e){return y(e.target.value)}})}),Object(O.jsx)(w.a.Item,{name:"password",label:"Password",children:Object(O.jsx)(p.a,{placeholder:"Enter password here...",onChange:function(e){return f(e.target.value)}})}),Object(O.jsx)(w.a.Item,{name:"modifier",className:"collection-create-form_last-form-item",children:Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a,{value:"user",children:"User"}),Object(O.jsx)(x.a,{value:"admin",children:"Admin"})]})})]})})]})};t.default=function(){var e=Object(j.f)(),t=Object(s.useContext)(d.a),n=t.users,a=t.getUsers;Object(s.useEffect)((function(){function t(){return(t=Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/v1/auth/token",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){if(console.log(t),!1!==t.auth)return console.log("logged in");e.push("/login")}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]);var h=function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,console.log(n),e.prev=2,e.next=5,fetch("/api/v1/auth/delete/".concat(n),{method:"DELETE",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){a()}),[]);var b=[{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"Role",dataIndex:"role",key:"role"},{key:"action",responsive:["md"],render:function(e,t){return Object(O.jsxs)(i.b,{size:"middle",children:[Object(O.jsx)(m,{user:t}),Object(O.jsx)(o.a,{title:"Are you sure you want to delete?",onConfirm:function(){return h(t)},children:Object(O.jsx)(u.a,{children:"Delete"})}),Object(O.jsx)(g,{user:t})]})}}];return Object(O.jsx)("div",{children:Object(O.jsx)("div",{children:Object(O.jsx)("main",{className:"relative z-0 overflow-y-auto focus:outline-none",tabindex:"0",children:Object(O.jsxs)("div",{className:"py-6",children:[Object(O.jsxs)("div",{className:"flex flex-row max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[Object(O.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Internal Users"}),Object(O.jsx)("div",{className:"ml-3",children:Object(O.jsx)(y,{})})]}),Object(O.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:Object(O.jsx)("div",{className:"py-4",children:Object(O.jsx)(l.a,{dataSource:n,columns:b,pagination:{defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","30"]}})})})]})})})})}}}]);
//# sourceMappingURL=4.2f1912ea.chunk.js.map
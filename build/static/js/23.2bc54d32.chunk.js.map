{"version":3,"sources":["pages/admin/Main.js"],"names":["Main","useState","unClaimed","setUnClaimed","open","setOpen","complete","setComplete","online","setOnline","reverse","setText","data","setData","test","history","useHistory","console","log","useEffect","a","io","connect","socket","on","soc","fetch","method","headers","Accept","then","response","json","auth","push","fetchOpen","Authorization","localStorage","getItem","ContentType","res","result","fetchClosed","fetchUnissued","className","tabindex","title","value","system","cpu","loadAverage","uptime","freeMem","freeMemPercentage","totalMem"],"mappings":"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","file":"static/js/23.2bc54d32.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport { Card, Statistic } from \"antd\";\n\nconst Main = () => {\n  const [unClaimed, setUnClaimed] = useState();\n  const [open, setOpen] = useState();\n  const [complete, setComplete] = useState();\n  const [online, setOnline] = useState(0);\n  const [text, setText] = useState([].reverse());\n  const [data, setData] = useState([]);\n  const [test, setTest] = useState([]);\n\n  const history = useHistory();\n\n  console.log(test)\n\n  useEffect(() => {\n    async function soc() {\n      const socket = await io.connect(\"/\");\n      socket.on(\"visitor enters\", (data) => setOnline({ data }));\n      socket.on(\"visitor exits\", (data) => setOnline({ data }));\n    }\n    soc();\n  }, []);\n\n  useEffect(() => {\n    async function soc() {\n      const socket = await io.connect(\"/\");\n      socket.on(\"file\", (data) => setText({ data }));\n    }\n    soc();\n  }, []);\n\n  useEffect(() => {\n    async function soc() {\n      const socket = await io.connect(\"/\");\n      socket.on(\"stats\", (data) => setData(data));\n    }\n    soc();\n  }, []);\n\n  // useEffect(() => {\n  //   async function soc() {\n  //     const socket = await io.connect(\"/\");\n  //     socket.on(\"startmonitor\", (data) => setTest(data));\n  //   }\n  //   soc();\n  // }, []);\n\n  useEffect(() => {\n    async function auth() {\n      await fetch(`/api/v1/auth/token`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n        },\n      })\n        .then((response) => response.json())\n        .then((response) => {\n          console.log(response);\n          const res = response;\n          if (res.auth === false) {\n            history.push(\"/login\");\n          } else {\n            return console.log(\"logged in\");\n          }\n        });\n    }\n    auth();\n    // eslint-disable-next-line\n  }, []);\n\n  const fetchOpen = async () => {\n    await fetch(`/api/v1/data/getallopen`, {\n      method: \"get\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        ContentType: \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        setOpen(result.result);\n      });\n  };\n\n  const fetchClosed = async () => {\n    await fetch(`/api/v1/data/getallcompleted`, {\n      method: \"get\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        ContentType: \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        setComplete(result.result);\n      });\n  };\n\n  const fetchUnissued = async () => {\n    await fetch(`/api/v1/data/unallocatedTickets`, {\n      method: \"get\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        ContentType: \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        setUnClaimed(result.result);\n      });\n  };\n\n  useEffect(() => {\n    fetchOpen();\n    fetchClosed();\n    fetchUnissued();\n  }, []);\n\n  return (\n    <div>\n      <main\n        className=\"relative z-0 overflow-y-auto focus:outline-none\"\n        tabindex=\"0\"\n      >\n        <div className=\"py-6\">\n          <div className=\"max-w-7xl mx-auto sm:px-6 md:px-8\">\n            <h1 className=\"text-2xl font-semibold text-gray-900 ml-3\">\n              Dashboard\n            </h1>\n          </div>\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\n            <div className=\"py-4\">\n              <div className=\"flex flex-col px-2 py-2 m-4 justify-items-center lg:flex-row\">\n                <div className=\"ml-1 mt-2\">\n                  <Card>\n                    <Statistic title=\"Closed Tickets\" value={complete} />\n                  </Card>\n                </div>\n                <div className=\"ml-1 mt-2\">\n                  <Card>\n                    <Statistic title=\"Open Tickets\" value={open} />\n                  </Card>\n                </div>\n                <div className=\"ml-1 mt-2\">\n                  <Card>\n                    <Statistic title=\"Unissued Tickets\" value={unClaimed} />\n                  </Card>\n                </div>\n                <div className=\"ml-1 mt-2\">\n                  <Card>\n                    <Statistic title=\"Online Users\" value={online.data} />\n                  </Card>\n                </div>\n                <div className=\"ml-1 mt-2\">\n                  <Card>\n                    <Statistic title=\"System OS\" value={data.system} />\n                  </Card>\n                </div>\n                <div className=\"ml-1 mt-2\">\n                  <Card>\n                    <Statistic title=\"Cpu Count\" value={data.cpu} />\n                  </Card>\n                </div>\n              </div>\n            </div>\n            <div className=\"flex py-1 px-2\">\n              <div className=\"flex\">\n                <div className=\"flex-col\">\n                  <div className=\"flex flex-col px-2 py-2 m-4 justify-items-center lg:flex-row\">\n                    <div className=\"ml-1 mt-2\">\n                      <Card>\n                        <Statistic\n                          title=\"Cpu Load Average 5mins %\"\n                          value={data.loadAverage}\n                        />\n                      </Card>\n                    </div>\n                    <div className=\"ml-1 mt-2\">\n                      <Card>\n                        <Statistic title=\"Uptime\" value={data.uptime} />\n                      </Card>\n                    </div>\n                    <div className=\"ml-1 mt-2\">\n                    <Card>\n                      <Statistic title=\"Free Memory MB\" value={data.freeMem} />\n                    </Card>\n                  </div>\n                  <div className=\"ml-1 mt-2\">\n                    <Card>\n                      <Statistic\n                        title=\"Free Memory %\"\n                        value={data.freeMemPercentage}\n                      />\n                    </Card>\n                  </div>\n                  <div className=\"ml-1 mt-2\">\n                    <Card>\n                      <Statistic\n                        title=\"Total Memory MB\"\n                        value={data.totalMem}\n                      />\n                    </Card>\n                  </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default Main;\n"],"sourceRoot":""}
{"version":3,"sources":["pages/admin/Main.js"],"names":["Main","useState","unClaimed","setUnClaimed","open","setOpen","complete","setComplete","online","setOnline","reverse","text","setText","data","setData","history","useHistory","useEffect","a","io","connect","socket","on","soc","fetch","method","headers","Accept","then","response","json","console","log","auth","push","fetchOpen","Authorization","localStorage","getItem","ContentType","res","result","fetchClosed","fetchUnissued","className","tabindex","title","value","system","cpu","loadAverage","uptime","freeMem","freeMemPercentage","totalMem","size","bordered","dataSource","pagination","defaultPageSize","showSizeChanger","pageSizeOptions","renderItem","item","Item"],"mappings":"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","file":"static/js/7.d950636c.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport io from \"socket.io-client\";\r\nimport { Card, Statistic, List } from \"antd\";\r\nimport moment from \"moment\";\r\n\r\nconst Main = () => {\r\n  const [unClaimed, setUnClaimed] = useState();\r\n  const [open, setOpen] = useState();\r\n  const [complete, setComplete] = useState();\r\n  const [online, setOnline] = useState(0);\r\n  const [text, setText] = useState([].reverse());\r\n  const [data, setData] = useState([]);\r\n\r\n  const history = useHistory();\r\n\r\n  // console.log(data)\r\n\r\n  useEffect(() => {\r\n    async function soc() {\r\n      const socket = await io.connect(\"/\");\r\n      socket.on(\"visitor enters\", (data) => setOnline({ data }));\r\n      socket.on(\"visitor exits\", (data) => setOnline({ data }));\r\n    }\r\n    soc();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function soc() {\r\n      const socket = await io.connect(\"/\");\r\n      socket.on(\"file\", (data) => setText({ data }));\r\n    }\r\n    soc();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function soc() {\r\n      const socket = await io.connect(\"/\");\r\n      socket.on(\"stats\", (data) => setData(data));\r\n    }\r\n    soc();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function auth() {\r\n      await fetch(`/api/v1/auth/token`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Accept: \"application/json\",\r\n        },\r\n      })\r\n        .then((response) => response.json())\r\n        .then((response) => {\r\n          console.log(response);\r\n          const res = response;\r\n          if (res.auth === false) {\r\n            history.push(\"/login\");\r\n          } else {\r\n            return console.log(\"logged in\");\r\n          }\r\n        });\r\n    }\r\n    auth();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const fetchOpen = async () => {\r\n    await fetch(`/api/v1/data/getallopen`, {\r\n      method: \"get\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n        ContentType: \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        setOpen(result.result);\r\n      });\r\n  };\r\n\r\n  const fetchClosed = async () => {\r\n    await fetch(`/api/v1/data/getallcompleted`, {\r\n      method: \"get\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n        ContentType: \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        setComplete(result.result);\r\n      });\r\n  };\r\n\r\n  const fetchUnissued = async () => {\r\n    await fetch(`/api/v1/data/unallocatedTickets`, {\r\n      method: \"get\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n        ContentType: \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        setUnClaimed(result.result);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchOpen();\r\n    fetchClosed();\r\n    fetchUnissued();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <main\r\n        className=\"relative z-0 overflow-y-auto focus:outline-none\"\r\n        tabindex=\"0\"\r\n      >\r\n        <div className=\"py-6\">\r\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\r\n            <h1 className=\"text-2xl font-semibold text-gray-900\">Dashboard</h1>\r\n          </div>\r\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\r\n            <div className=\"py-4\">\r\n              <div className=\"flex flex-row px-2 mx-auto justify-items-center \">\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"Closed Tickets\" value={complete} />\r\n                  </Card>\r\n                </div>\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"Open Tickets\" value={open} />\r\n                  </Card>\r\n                </div>\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"Unissued Tickets\" value={unClaimed} />\r\n                  </Card>\r\n                </div>\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"Online Users\" value={online.data} />\r\n                  </Card>\r\n                </div>\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"System OS\" value={data.system} />\r\n                  </Card>\r\n                </div>\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"Cpu Count\" value={data.cpu} />\r\n                  </Card>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex py-1 px-3\">\r\n              <div className=\"flex:1\">\r\n                <div className=\"flex-col\">\r\n                  <div className=\"flex flex-row\">\r\n                    <div className=\"ml-1\">\r\n                      <Card>\r\n                        <Statistic\r\n                          title=\"Cpu Load Average 5mins %\"\r\n                          value={data.loadAverage}\r\n                        />\r\n                      </Card>\r\n                    </div>\r\n                    <div className=\"ml-1\">\r\n                      <Card>\r\n                        <Statistic title=\"Uptime\" value={data.uptime} />\r\n                      </Card>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex flex-row\">\r\n                  <div className=\"ml-1\">\r\n                    <Card>\r\n                      <Statistic title=\"Free Memory MB\" value={data.freeMem} />\r\n                    </Card>\r\n                  </div>\r\n                  <div className=\"ml-1\">\r\n                    <Card>\r\n                      <Statistic\r\n                        title=\"Free Memory %\"\r\n                        value={data.freeMemPercentage}\r\n                      />\r\n                    </Card>\r\n                  </div>\r\n                  <div className=\"ml-1\">\r\n                    <Card>\r\n                      <Statistic\r\n                        title=\"Total Memory MB\"\r\n                        value={data.totalMem}\r\n                      />\r\n                    </Card>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex:2 ml-5 h-2/4\">\r\n                <div className=\"h-2/4\">\r\n                  <List\r\n                    size=\"small\"\r\n                    bordered\r\n                    dataSource={text.data}\r\n                    pagination={{\r\n                      defaultPageSize: 10,\r\n                      showSizeChanger: true,\r\n                      pageSizeOptions: [\"15\", \"30\", \"40\"],\r\n                    }}\r\n                    renderItem={(item) => <List.Item>{item}</List.Item>}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n"],"sourceRoot":""}
{"version":3,"sources":["pages/History.js"],"names":["Table","useContext","GlobalContext","history","getHistory","filter","useState","id","setId","useEffect","className","onChange","e","target","value","type","name","placeholder","onClick","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","scope","map","ticket","badge","p","priority","client","issue","assignedTo","firstName","lastName","isComplete","to","pathname","state","Card","tickets","setTickets","a","fetch","method","headers","then","res","json","_id","History"],"mappings":"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","file":"static/js/17.14c39cb7.chunk.js","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { GlobalContext } from \"../Context/GlobalState\";\r\n\r\nconst Table = () => {\r\n\r\n  const { history, getHistory, filter } = useContext(GlobalContext);\r\n\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [id, setId] = useState();\r\n\r\n  useEffect(() => {\r\n    getHistory();\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const high = \"bg-red-100 text-red-800\";\r\n  const low = \"bg-blue-100 text-blue-800\";\r\n  const normal = \"bg-green-100 text-green-800\";\r\n\r\n  return (\r\n    <div className=\"max-w-screen-xl mx-auto pb-6 px-4 sm:px-6 lg:pb-16 lg:px-10\">\r\n      <div className=\"flex flex-row\">\r\n        <div className=\"w-44 mr-4\">\r\n          <input\r\n            onChange={(e) => setId(e.target.value)}\r\n            type=\"number\"\r\n            name=\"ticketid\"\r\n            id=\"ticketid\"\r\n            className=\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\r\n            placeholder=\"Search by Ticket ID\"\r\n          />\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => {\r\n            filter(id);\r\n          }}\r\n        >\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            className=\"h-4 w-4\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n            />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n      <div className=\"flex flex-col\">\r\n        <div className=\" overflow-x-auto sm:-mx-6 lg:-mx-8\">\r\n          <div className=\"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8\">\r\n            <div className=\"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th\r\n                      scope=\"col\"\r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                    >\r\n                      Id\r\n                    </th>\r\n                    <th\r\n                      scope=\"col\"\r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                    >\r\n                      Name\r\n                    </th>\r\n                    <th\r\n                      scope=\"col\"\r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                    >\r\n                      Client\r\n                    </th>\r\n                    <th\r\n                      scope=\"col\"\r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                    >\r\n                      Priority\r\n                    </th>\r\n                    <th\r\n                      scope=\"col\"\r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                    >\r\n                      Issue\r\n                    </th>\r\n                    <th\r\n                      scope=\"col\"\r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                    >\r\n                      Engineer\r\n                    </th>\r\n                    <th\r\n                      scope=\"col\"\r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                    >\r\n                      Status\r\n                    </th>\r\n                    <th scope=\"col\" className=\"relative px-6 py-3\">\r\n                      <span className=\"sr-only\">Edit</span>\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {history\r\n                    ? history.map((ticket) => {\r\n                        let p = ticket.priority;\r\n                        let badge;\r\n\r\n                        if (p === \"Low\") {\r\n                          badge = low;\r\n                        }\r\n                        if (p === \"Normal\") {\r\n                          badge = normal;\r\n                        }\r\n                        if (p === \"High\") {\r\n                          badge = high;\r\n                        }\r\n\r\n                        return (\r\n                          <tr className=\"bg-white\" key={ticket.id}>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                              {ticket.id}\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                              {ticket.name}\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                              {ticket.client.name}\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                              <span\r\n                                className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${badge}`}\r\n                              >\r\n                                {ticket.priority}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                              {ticket.issue}\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                              {ticket.assignedTo\r\n                                ? ticket.assignedTo.firstName +\r\n                                  \" \" +\r\n                                  ticket.assignedTo.lastName\r\n                                : \"not assigned\"}\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                              {ticket.isComplete ? \"Completed\" : \"Issued\"}\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                              <Link\r\n                                to={{\r\n                                  pathname: `tickets/${ticket.id}`,\r\n                                  state: ticket,\r\n                                }}\r\n                                className=\"text-indigo-600 hover:text-indigo-900\"\r\n                              >\r\n                                view\r\n                              </Link>\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })\r\n                    : \"\"}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Card = () => {\r\n  const [tickets, setTickets] = useState([]);\r\n\r\n  async function getHistory() {\r\n    await fetch(`/api/v1/tickets/all`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        setTickets(res.tickets);\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    getHistory();\r\n  }, []);\r\n\r\n  const high = \"bg-red-100 text-red-800\";\r\n  const low = \"bg-blue-100 text-blue-800\";\r\n  const normal = \"bg-green-100 text-green-800\";\r\n\r\n  return (\r\n    <div className=\"overflow-x-auto md:-mx-6 lg:-mx-8 mt-10\">\r\n      <div className=\"py-2 align-middle inline-block min-w-full md:px-6 lg:px-8\">\r\n        <div className=\"overflow-hidden md:rounded-lg\">\r\n          {tickets.map((ticket) => {\r\n            let p = ticket.priority;\r\n            let badge;\r\n\r\n            if (p === \"Low\") {\r\n              badge = low;\r\n            }\r\n            if (p === \"normal\") {\r\n              badge = normal;\r\n            }\r\n            if (p === \"High\") {\r\n              badge = high;\r\n            }\r\n\r\n            return (\r\n              <div className=\"flex justify-start\" key={ticket.id}>\r\n                <div className=\"w-full mb-2 border\">\r\n                  <div className=\"px-4 py-4\">\r\n                    <div>\r\n                      <h1 className=\"font-semibold leading-tight text-2xl text-gray-800 hover:text-gray-800 ml-1\">\r\n                        {ticket.name}\r\n                      </h1>\r\n                      <p className=\" px-2\">Client: {ticket.client.name}</p>\r\n                    </div>\r\n                    <span\r\n                      className={`inline-flex items-center px-2.5 py-0.5 m-1 rounded-full text-xs font-medium ${badge}`}\r\n                    >\r\n                      {ticket.priority}\r\n                    </span>\r\n                    <p className=\"text-gray-900 m-2\">{ticket.issue}</p>\r\n                    <div className=\"text-gray-700 text-sm font-bold p-2 m-2\">\r\n                      <Link\r\n                        to={{\r\n                          pathname: `tickets/${ticket._id}`,\r\n                          state: ticket,\r\n                        }}\r\n                        className=\"float-right\"\r\n                      >\r\n                        View Full Ticket\r\n                      </Link>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst History = () => {\r\n  return (\r\n    <div className=\"max-w-screen-xl mx-auto pb-6 px-4 sm:px-6 lg:pb-16 lg:px-10 flex flex-col\">\r\n      <div className=\"sm:px-6 md:px-8 ml-2\">\r\n        <div className=\"flex flex-row\">\r\n          <h1 className=\"text-2xl font-semibold text-gray-900 mr-4\">History</h1>\r\n        </div>\r\n      </div>\r\n      <div className=\"hidden sm:block\">\r\n        <Table />\r\n      </div>\r\n      <div className=\"sm:hidden\">\r\n        <Card />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;\r\n"],"sourceRoot":""}
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{374:function(e,t,n){"use strict";var a=n(219);t.a=a.a},399:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n.n(a),s=n(13),c=n(0),o=n(364),i=n(363),u=n(36),l=n(358),d=n(31),j=n(37),f=n(10),b=n(361),m=n(374),h=n(140),p=n(1),x=function(e){var t=Object(c.useState)(e.user),n=Object(f.a)(t,2),a=n[0],i=(n[1],Object(c.useState)(e.user.firstName)),l=Object(f.a)(i,2),d=l[0],j=l[1],x=Object(c.useState)(e.user.lastName),O=Object(f.a)(x,2),g=O[0],v=O[1],w=Object(c.useState)(e.user.email),y=Object(f.a)(w,2),N=y[0],k=y[1],C=Object(c.useState)(e.user.isAdmin),S=Object(f.a)(C,2),E=S[0],T=S[1],A=Object(c.useState)(!1),I=Object(f.a)(A,2),z=I[0],U=I[1],P=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/auth/edit",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({id:a.id,firstName:d,lastName:g,email:N,role:E})}).then((function(e){return e.json}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!1),N.toString(N),N.toLowerCase(),e.next=5,P();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{children:[Object(p.jsx)(u.a,{onClick:function(){U(!0)},children:"Edit User info & Role"}),Object(p.jsxs)(b.a,{visible:z,title:"Edit a users info",okText:"Update",cancelText:"Cancel",onCancel:function(){U(!1)},onOk:V,children:[Object(p.jsx)(m.a,{children:Object(p.jsxs)("h5",{children:["Edit Name :"," ",Object(p.jsxs)("div",{className:"flex flex-row",children:[Object(p.jsx)("input",{type:"text",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",defaultValue:a.firstName,onChange:function(e){return j(e.target.value)}}),Object(p.jsx)("input",{type:"text",className:"ml-2 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",defaultValue:a.lastName,onChange:function(e){return v(e.target.value)}})]})]})}),Object(p.jsx)(m.a,{children:Object(p.jsxs)("h5",{children:["Edit Email :"," ",Object(p.jsx)("input",{type:"text",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",defaultValue:a.email,onChange:function(e){return k(e.target.value)}})]})}),Object(p.jsx)("h5",{children:"Edit Role : "}),Object(p.jsx)(h.a.Group,{buttonStyle:"solid",defaultValue:a.isAdmin,onChange:function(e){return T(e.target.value)},children:Object(p.jsxs)(o.b,{children:[Object(p.jsx)(h.a.Button,{value:!1,children:"User"}),Object(p.jsx)(h.a.Button,{value:!0,children:"Admin"})]})})]})]})},O=n(213),g=function(e){var t=Object(c.useState)(!1),n=Object(f.a)(t,2),a=n[0],o=n[1],i=Object(c.useState)(e.user._id),l=Object(f.a)(i,2),d=l[0],j=(l[1],Object(c.useState)("")),m=Object(f.a)(j,2),h=m[0],x=m[1],g=function(){var e=Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d,e.next=3,fetch("/api/v1/auth/resetPassword/".concat(t),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({password:h})}).then((function(e){return e.json()})).then((function(e){var t;!1===e.failed?O.b.success("Password updated"):(t=e.message,O.b.error("".concat(t)))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!1),e.next=3,g();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{children:[Object(p.jsx)(u.a,{onClick:function(){o(!0)},children:"Reset password"}),Object(p.jsx)(b.a,{visible:a,title:"Reset users password",okText:"Update",cancelText:"Cancel",onCancel:function(){o(!1)},onOk:v,children:Object(p.jsx)("input",{type:"password",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",onChange:function(e){return x(e.target.value)},placeholder:"Enter users new password"})})]})},v=n(360),w=function(){var e=Object(c.useState)(!1),t=Object(f.a)(e,2),n=t[0],a=t[1],o=v.a.useForm(),i=Object(f.a)(o,1)[0],u=Object(c.useState)(""),l=Object(f.a)(u,2),d=l[0],m=l[1],x=Object(c.useState)(""),O=Object(f.a)(x,2),g=O[0],w=O[1],y=Object(c.useState)(""),N=Object(f.a)(y,2),k=N[0],C=N[1],S=Object(c.useState)(""),E=Object(f.a)(S,2),T=E[0],A=E[1],I=Object(c.useContext)(j.a).createUser,z=function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!1),e.next=3,I(k,T,g,d);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{onClick:function(){return a(!0)},type:"button",className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:Object(p.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Object(p.jsx)("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})})}),Object(p.jsx)(b.a,{centered:!0,visible:n,title:"Create a new user",okText:"Create",cancelText:"Cancel",onCancel:function(){a(!1)},onOk:function(){i.validateFields().then((function(e){i.resetFields(),z(e)})).catch((function(e){console.log("Validate Failed:",e)}))},children:Object(p.jsxs)(v.a,{form:i,layout:"vertical",name:"form_in_modal",initialValues:{modifier:"public"},children:[Object(p.jsx)(v.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of your new user!"}],children:Object(p.jsxs)("div",{className:"flex flex-row",children:[Object(p.jsx)("input",{type:"text",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-1/2 sm:text-sm border-gray-300 rounded-md",placeholder:"Enter first name here...",name:"name",onChange:function(e){return C(e.target.value)}}),Object(p.jsx)("input",{type:"text",className:"ml-2 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-1/2 sm:text-sm border-gray-300 rounded-md",placeholder:"Enter last name here...",name:"name",onChange:function(e){return A(e.target.value)}})]})}),Object(p.jsx)(v.a.Item,{name:"email",label:"Email",children:Object(p.jsx)("input",{type:"text",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Enter email here....",onChange:function(e){return w(e.target.value)}})}),Object(p.jsx)(v.a.Item,{name:"password",label:"Password",children:Object(p.jsx)("input",{type:"password",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Enter password here...",onChange:function(e){return m(e.target.value)}})}),Object(p.jsx)(v.a.Item,{name:"modifier",className:"collection-create-form_last-form-item",children:Object(p.jsxs)(h.a.Group,{children:[Object(p.jsx)(h.a,{value:"user",children:"User"}),Object(p.jsx)(h.a,{value:"admin",children:"Admin"})]})})]})})]})};t.default=function(){var e=Object(d.f)(),t=Object(c.useContext)(j.a),n=t.users,a=t.getUsers;Object(c.useEffect)((function(){function t(){return(t=Object(s.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/v1/auth/token",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){if(console.log(t),!1!==t.auth)return console.log("logged in");e.push("/login")}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]);var f=function(){var e=Object(s.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.prev=1,e.next=4,fetch("/api/v1/auth/delete/".concat(n),{method:"DELETE",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){a()}),[]);var b=[{title:"Name",dataIndex:"firstName",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{key:"action",responsive:["md"],render:function(e,t){return Object(p.jsxs)(o.b,{size:"middle",children:[Object(p.jsx)(x,{user:t}),Object(p.jsx)(i.a,{title:"Are you sure you want to delete?",onConfirm:function(){return f(t)},children:Object(p.jsx)(u.a,{children:"Delete"})}),Object(p.jsx)(g,{user:t})]})}}];return Object(p.jsx)("div",{children:Object(p.jsx)("div",{children:Object(p.jsx)("main",{className:"relative z-0 overflow-y-auto focus:outline-none",tabindex:"0",children:Object(p.jsxs)("div",{className:"py-6",children:[Object(p.jsxs)("div",{className:"flex flex-row max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[Object(p.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Internal Users"}),Object(p.jsx)("div",{className:"ml-3",children:Object(p.jsx)(w,{})})]}),Object(p.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:Object(p.jsx)("div",{className:"py-4",children:Object(p.jsx)(l.a,{dataSource:n,columns:b,pagination:{defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","30"]}})})})]})})})})}}}]);
//# sourceMappingURL=4.bbd18b5f.chunk.js.map
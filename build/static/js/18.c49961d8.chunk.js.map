{"version":3,"sources":["assets/server_down.svg","pages/History.js"],"names":["Table","props","className","scope","tickets","map","ticket","badge","p","priority","id","name","client","issue","assignedTo","firstName","lastName","isComplete","to","pathname","state","Card","useState","setTickets","a","fetch","method","headers","then","res","json","useEffect","getHistory","_id","fetchAllTickets","History","useQuery","data","status","src","server","alt","length"],"mappings":"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","file":"static/js/18.c49961d8.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/server_down.532ea75d.svg\";","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useQuery } from \"react-query\";\r\nimport { Ellipsis } from \"react-awesome-spinners\";\r\n\r\nimport server from '../assets/server_down.svg'\r\n\r\nconst Table = (props) => {\r\n  const high = \"bg-red-100 text-red-800\";\r\n  const low = \"bg-blue-100 text-blue-800\";\r\n  const normal = \"bg-green-100 text-green-800\";\r\n\r\n  return (\r\n    <div className=\"max-w-screen-xl mx-auto pb-6 px-4 sm:px-6 lg:pb-16 lg:px-10\">\r\n      {/* <div className=\"flex flex-row\">\r\n        <div className=\"w-44 mr-4\">\r\n          <input\r\n            onChange={(e) => props.setId(e.target.value)}\r\n            type=\"number\"\r\n            name=\"ticketid\"\r\n            id=\"ticketid\"\r\n            className=\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md\"\r\n            placeholder=\"Search by Ticket ID\"\r\n          />\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => {\r\n            props.filterTickets();\r\n          }}\r\n        >\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            className=\"h-4 w-4\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n            />\r\n          </svg>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          className=\"ml-3\"\r\n          onClick={() => props.fetchAllTickets()}\r\n        >\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            className=\"h-4 w-4\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\r\n            />\r\n          </svg>\r\n        </button>\r\n      </div> */}\r\n      <div className=\"flex flex-col\">\r\n        <div className=\" overflow-x-auto sm:-mx-6 lg:-mx-8\">\r\n          <div className=\"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8\">\r\n            <div className=\"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th\r\n                      scope=\"col\"\r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                    >\r\n                      Id\r\n                    </th>\r\n                    <th\r\n                      scope=\"col\"\r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                    >\r\n                      Name\r\n                    </th>\r\n                    <th\r\n                      scope=\"col\"\r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                    >\r\n                      Client\r\n                    </th>\r\n                    <th\r\n                      scope=\"col\"\r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                    >\r\n                      Priority\r\n                    </th>\r\n                    <th\r\n                      scope=\"col\"\r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                    >\r\n                      Issue\r\n                    </th>\r\n                    <th\r\n                      scope=\"col\"\r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                    >\r\n                      Engineer\r\n                    </th>\r\n                    <th\r\n                      scope=\"col\"\r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                    >\r\n                      Status\r\n                    </th>\r\n                    <th scope=\"col\" className=\"relative px-6 py-3\">\r\n                      <span className=\"sr-only\">Edit</span>\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {props.tickets.map((ticket) => {\r\n                    let p = ticket.priority;\r\n                    let badge;\r\n\r\n                    if (p === \"Low\") {\r\n                      badge = low;\r\n                    }\r\n                    if (p === \"Normal\") {\r\n                      badge = normal;\r\n                    }\r\n                    if (p === \"High\") {\r\n                      badge = high;\r\n                    }\r\n\r\n                    return (\r\n                      <tr className=\"bg-white\" key={ticket.id}>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                          {ticket.id}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                          {ticket.name}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                          {ticket.client.name}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                          <span\r\n                            className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${badge}`}\r\n                          >\r\n                            {ticket.priority}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                          {ticket.issue}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                          {ticket.assignedTo\r\n                            ? ticket.assignedTo.firstName +\r\n                              \" \" +\r\n                              ticket.assignedTo.lastName\r\n                            : \"not assigned\"}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                          {ticket.isComplete ? \"Completed\" : \"Issued\"}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                          <Link\r\n                            to={{\r\n                              pathname: `tickets/${ticket.id}`,\r\n                              state: ticket,\r\n                            }}\r\n                            className=\"text-indigo-600 hover:text-indigo-900\"\r\n                          >\r\n                            view\r\n                          </Link>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Card = () => {\r\n  const [tickets, setTickets] = useState([]);\r\n\r\n  async function getHistory() {\r\n    await fetch(`/api/v1/tickets/all`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        setTickets(res.tickets);\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    getHistory();\r\n  }, []);\r\n\r\n  const high = \"bg-red-100 text-red-800\";\r\n  const low = \"bg-blue-100 text-blue-800\";\r\n  const normal = \"bg-green-100 text-green-800\";\r\n\r\n  return (\r\n    <div className=\"overflow-x-auto md:-mx-6 lg:-mx-8 mt-10\">\r\n      <div className=\"py-2 align-middle inline-block min-w-full md:px-6 lg:px-8\">\r\n        <div className=\"overflow-hidden md:rounded-lg\">\r\n          {tickets.map((ticket) => {\r\n            let p = ticket.priority;\r\n            let badge;\r\n\r\n            if (p === \"Low\") {\r\n              badge = low;\r\n            }\r\n            if (p === \"normal\") {\r\n              badge = normal;\r\n            }\r\n            if (p === \"High\") {\r\n              badge = high;\r\n            }\r\n\r\n            return (\r\n              <div className=\"flex justify-start\" key={ticket.id}>\r\n                <div className=\"w-full mb-2 border\">\r\n                  <div className=\"px-4 py-4\">\r\n                    <div>\r\n                      <h1 className=\"font-semibold leading-tight text-2xl text-gray-800 hover:text-gray-800 ml-1\">\r\n                        {ticket.name}\r\n                      </h1>\r\n                      <p className=\" px-2\">Client: {ticket.client.name}</p>\r\n                    </div>\r\n                    <span\r\n                      className={`inline-flex items-center px-2.5 py-0.5 m-1 rounded-full text-xs font-medium ${badge}`}\r\n                    >\r\n                      {ticket.priority}\r\n                    </span>\r\n                    <p className=\"text-gray-900 m-2\">{ticket.issue}</p>\r\n                    <div className=\"text-gray-700 text-sm font-bold p-2 m-2\">\r\n                      <Link\r\n                        to={{\r\n                          pathname: `tickets/${ticket._id}`,\r\n                          state: ticket,\r\n                        }}\r\n                        className=\"float-right\"\r\n                      >\r\n                        View Full Ticket\r\n                      </Link>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst fetchAllTickets = async () => {\r\n  const res = await fetch(\"/api/v1/tickets/all\");\r\n  return res.json();\r\n};\r\n\r\nconst History = () => {\r\n  const { data, status } = useQuery(\"fetchAllTickets\", fetchAllTickets);\r\n\r\n  return (\r\n    <div className=\"max-w-screen-xl mx-auto pb-6 px-4 sm:px-6 lg:pb-16 lg:px-10 flex flex-col\">\r\n      <div className=\"sm:px-6 md:px-8 ml-2\">\r\n        <div className=\"flex flex-row\">\r\n          <h1 className=\"text-2xl font-semibold text-gray-900\">History</h1>\r\n        </div>\r\n      </div>\r\n      <div className=\"flex flex-col\">\r\n        {status === \"loading\" && (\r\n          <div className=\"min-h-screen flex flex-col justify-center items-center py-12 sm:px-6 lg:px-8\">\r\n            <h2> Loading data ... </h2>\r\n            <Ellipsis />\r\n          </div>\r\n        )}\r\n\r\n        {status === \"error\" && (\r\n          <div className=\"min-h-screen flex flex-col justify-center items-center py-12 sm:px-6 lg:px-8\">\r\n            <h2 className=\"text-2xl font-bold\"> Error fetching data ... </h2>\r\n            <img src={server} className=\"h-96 w-96\" alt=\"error\" />\r\n          </div>\r\n        )}\r\n\r\n        {status === \"success\" && (\r\n          <div>\r\n            {data.tickets.length === 0 ? (\r\n              <div className=\"min-h-screen flex flex-col justify-center items-center py-12 sm:px-6 lg:px-8\">\r\n                <p>No tickets have been created</p>\r\n              </div>\r\n            ) : (\r\n              <div key={data.tickets.id}>\r\n                <div className=\"hidden sm:block\">\r\n                  <Table tickets={data.tickets} />\r\n                </div>\r\n                <div className=\"sm:hidden\">\r\n                  <Card tickets={data.tickets} />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;\r\n"],"sourceRoot":""}
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[18],{339:function(e,t,r){"use strict";t.a=r.p+"static/media/server_down.532ea75d.svg"},399:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var s=r(1),n=r(10),i=r(2),c=r(9),a=r(26),o=r(22),l=r(38),u=r(20),d=function(e){function t(t,r){var s;return(s=e.call(this)||this).client=t,s.options=r,s.trackedProps=[],s.previousSelectError=null,s.bindMethods(),s.setOptions(r),s}Object(n.a)(t,e);var r=t.prototype;return r.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},r.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),h(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},r.onUnsubscribe=function(){this.listeners.length||this.destroy()},r.shouldFetchOnReconnect=function(){return e=this.currentQuery,!1!==(t=this.options).enabled&&("always"===t.refetchOnReconnect||!1!==t.refetchOnReconnect&&f(e,t));var e,t},r.shouldFetchOnWindowFocus=function(){return e=this.currentQuery,!1!==(t=this.options).enabled&&("always"===t.refetchOnWindowFocus||!1!==t.refetchOnWindowFocus&&f(e,t));var e,t},r.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},r.setOptions=function(e,t){var r=this.options,s=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(e),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();var n=this.hasListeners();n&&p(this.currentQuery,s,this.options,r)&&this.executeFetch(),this.updateResult(t),!n||this.currentQuery===s&&this.options.enabled===r.enabled&&this.options.staleTime===r.staleTime||this.updateStaleTimeout(),!n||this.currentQuery===s&&this.options.enabled===r.enabled&&this.options.refetchInterval===r.refetchInterval||this.updateRefetchInterval()},r.getOptimisticResult=function(e){var t=this.client.defaultQueryObserverOptions(e),r=this.client.getQueryCache().build(this.client,t);return this.createResult(r,t)},r.getCurrentResult=function(){return this.currentResult},r.trackResult=function(e){var t=this,r={};return Object.keys(e).forEach((function(s){Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:function(){var r=s;return t.trackedProps.includes(r)||t.trackedProps.push(r),e[r]}})})),r},r.getNextResult=function(e){var t=this;return new Promise((function(r,s){var n=t.subscribe((function(t){t.isFetching||(n(),t.isError&&(null==e?void 0:e.throwOnError)?s(t.error):r(t))}))}))},r.getCurrentQuery=function(){return this.currentQuery},r.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},r.refetch=function(e){return this.fetch(e)},r.fetchOptimistic=function(e){var t=this,r=this.client.defaultQueryObserverOptions(e),s=this.client.getQueryCache().build(this.client,r);return s.fetch().then((function(){return t.createResult(s,r)}))},r.fetch=function(e){var t=this;return this.executeFetch(e).then((function(){return t.updateResult(),t.currentResult}))},r.executeFetch=function(e){this.updateQuery();var t=this.currentQuery.fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(i.i)),t},r.updateStaleTimeout=function(){var e=this;if(this.clearStaleTimeout(),!i.e&&!this.currentResult.isStale&&Object(i.f)(this.options.staleTime)){var t=Object(i.q)(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout((function(){e.currentResult.isStale||e.updateResult()}),t)}},r.updateRefetchInterval=function(){var e=this;this.clearRefetchInterval(),!i.e&&!1!==this.options.enabled&&Object(i.f)(this.options.refetchInterval)&&(this.refetchIntervalId=setInterval((function(){(e.options.refetchIntervalInBackground||a.a.isFocused())&&e.executeFetch()}),this.options.refetchInterval))},r.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval()},r.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},r.clearStaleTimeout=function(){clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0},r.clearRefetchInterval=function(){clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0},r.createResult=function(e,t){var r,s=this.currentQuery,n=this.options,c=this.currentResult,a=this.currentResultState,o=this.currentResultOptions,u=e!==s,d=u?e.state:this.currentQueryInitialState,x=u?this.currentResult:this.previousQueryResult,m=e.state,b=m.dataUpdatedAt,j=m.error,v=m.errorUpdatedAt,y=m.isFetching,O=m.status,g=!1,w=!1;if(t.optimisticResults){var N=this.hasListeners(),R=!N&&h(e,t),S=N&&p(e,s,t,n);(R||S)&&(y=!0,b||(O="loading"))}if(t.keepPreviousData&&!m.dataUpdateCount&&(null==x?void 0:x.isSuccess)&&"error"!==O)r=x.data,b=x.dataUpdatedAt,O=x.status,g=!0;else if(t.select&&"undefined"!==typeof m.data)if(c&&m.data===(null==a?void 0:a.data)&&t.select===(null==o?void 0:o.select)&&!this.previousSelectError)r=c.data;else try{r=t.select(m.data),!1!==t.structuralSharing&&(r=Object(i.m)(null==c?void 0:c.data,r)),this.previousSelectError=null}catch(Q){Object(l.a)().error(Q),j=Q,this.previousSelectError=Q,v=Date.now(),O="error"}else r=m.data;if("undefined"!==typeof t.placeholderData&&"undefined"===typeof r&&"loading"===O){var k;if((null==c?void 0:c.isPlaceholderData)&&t.placeholderData===(null==o?void 0:o.placeholderData))k=c.data;else if(k="function"===typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&"undefined"!==typeof k)try{k=t.select(k),!1!==t.structuralSharing&&(k=Object(i.m)(null==c?void 0:c.data,k)),this.previousSelectError=null}catch(Q){Object(l.a)().error(Q),j=Q,this.previousSelectError=Q,v=Date.now(),O="error"}"undefined"!==typeof k&&(O="success",r=k,w=!0)}return{status:O,isLoading:"loading"===O,isSuccess:"success"===O,isError:"error"===O,isIdle:"idle"===O,data:r,dataUpdatedAt:b,error:j,errorUpdatedAt:v,failureCount:m.fetchFailureCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:y,isLoadingError:"error"===O&&0===m.dataUpdatedAt,isPlaceholderData:w,isPreviousData:g,isRefetchError:"error"===O&&0!==m.dataUpdatedAt,isStale:f(e,t),refetch:this.refetch,remove:this.remove}},r.shouldNotifyListeners=function(e,t){if(!t)return!0;if(e===t)return!1;var r=this.options,s=r.notifyOnChangeProps,n=r.notifyOnChangePropsExclusions;if(!s&&!n)return!0;if("tracked"===s&&!this.trackedProps.length)return!0;var i="tracked"===s?this.trackedProps:s;return Object.keys(e).some((function(r){var s=r,c=e[s]!==t[s],a=null==i?void 0:i.some((function(e){return e===r})),o=null==n?void 0:n.some((function(e){return e===r}));return c&&!o&&(!i||a)}))},r.updateResult=function(e){var t=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!Object(i.o)(this.currentResult,t)){var r={cache:!0};!1!==(null==e?void 0:e.listeners)&&this.shouldNotifyListeners(this.currentResult,t)&&(r.listeners=!0),this.notify(Object(s.a)({},r,e))}},r.updateQuery=function(){var e=this.client.getQueryCache().build(this.client,this.options);if(e!==this.currentQuery){var t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}},r.onQueryUpdate=function(e){var t={};"success"===e.type?t.onSuccess=!0:"error"!==e.type||Object(u.c)(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()},r.notify=function(e){var t=this;c.a.batch((function(){e.onSuccess?(null==t.options.onSuccess||t.options.onSuccess(t.currentResult.data),null==t.options.onSettled||t.options.onSettled(t.currentResult.data,null)):e.onError&&(null==t.options.onError||t.options.onError(t.currentResult.error),null==t.options.onSettled||t.options.onSettled(void 0,t.currentResult.error)),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)})),e.cache&&t.client.getQueryCache().notify({query:t.currentQuery,type:"observerResultsUpdated"})}))},t}(o.a);function h(e,t){return function(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||function(e,t){return!1!==t.enabled&&e.state.dataUpdatedAt>0&&("always"===t.refetchOnMount||!1!==t.refetchOnMount&&f(e,t))}(e,t)}function p(e,t,r,s){return!1!==r.enabled&&(e!==t||!1===s.enabled)&&f(e,r)}function f(e,t){return e.isStaleByTime(t.staleTime)}var x=r(0),m=r.n(x);function b(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var j=m.a.createContext(b()),v=r(175);function y(e,t){var r=m.a.useRef(!1),s=m.a.useState(0)[1],n=Object(v.b)(),i=m.a.useContext(j),a=n.defaultQueryObserverOptions(e);a.optimisticResults=!0,a.onError&&(a.onError=c.a.batchCalls(a.onError)),a.onSuccess&&(a.onSuccess=c.a.batchCalls(a.onSuccess)),a.onSettled&&(a.onSettled=c.a.batchCalls(a.onSettled)),a.suspense&&"number"!==typeof a.staleTime&&(a.staleTime=1e3),(a.suspense||a.useErrorBoundary)&&(i.isReset()||(a.retryOnMount=!1));var o=m.a.useState((function(){return new t(n,a)}))[0],l=o.getOptimisticResult(a);if(m.a.useEffect((function(){r.current=!0,i.clearReset();var e=o.subscribe(c.a.batchCalls((function(){r.current&&s((function(e){return e+1}))})));return o.updateResult(),function(){r.current=!1,e()}}),[i,o]),m.a.useEffect((function(){o.setOptions(a,{listeners:!1})}),[a,o]),a.suspense&&l.isLoading)throw o.fetchOptimistic(a).then((function(e){var t=e.data;null==a.onSuccess||a.onSuccess(t),null==a.onSettled||a.onSettled(t,null)})).catch((function(e){i.clearReset(),null==a.onError||a.onError(e),null==a.onSettled||a.onSettled(void 0,e)}));if((a.suspense||a.useErrorBoundary)&&l.isError&&!l.isFetching)throw l.error;return"tracked"===a.notifyOnChangeProps&&(l=o.trackResult(l)),l}function O(e,t,r){return y(Object(i.k)(e,t,r),d)}},503:function(e,t,r){"use strict";r.r(t);var s=r(3),n=r.n(s),i=r(6),c=r(57),a=r(0),o=r(62),l=r(399),u=r(174),d=r(339),h=r(5),p=function(e){return Object(h.jsx)("div",{className:"mx-auto pb-6 px-4 sm:px-6 lg:pb-16 lg:px-10",children:Object(h.jsx)("div",{className:"flex flex-col",children:Object(h.jsx)("div",{className:" overflow-x-auto sm:-mx-6 lg:-mx-8",children:Object(h.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:Object(h.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:Object(h.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[Object(h.jsx)("thead",{className:"bg-gray-50",children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Id"}),Object(h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),Object(h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),Object(h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),Object(h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Issue"}),Object(h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Engineer"}),Object(h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),Object(h.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:Object(h.jsx)("span",{className:"sr-only",children:"Edit"})})]})}),Object(h.jsx)("tbody",{children:e.tickets.map((function(e){var t,r=e.priority;return"Low"===r&&(t="bg-blue-100 text-blue-800"),"Normal"===r&&(t="bg-green-100 text-green-800"),"High"===r&&(t="bg-red-100 text-red-800"),Object(h.jsxs)("tr",{className:"bg-white",children:[Object(h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.id}),Object(h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),Object(h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.client.name}),Object(h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Object(h.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(t),children:e.priority})}),Object(h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.issue}),Object(h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.assignedTo?e.assignedTo.firstName+" "+e.assignedTo.lastName:"not assigned"}),Object(h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.isComplete?"Completed":"Issued"}),Object(h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:Object(h.jsx)(o.b,{to:{pathname:"tickets/".concat(e.id),state:e},className:"text-indigo-600 hover:text-indigo-900",children:"view"})})]},e.id)}))})]})})})})})})},f=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),r=t[0],s=t[1];function l(){return(l=Object(i.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/tickets/all",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){s(e.tickets)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){!function(){l.apply(this,arguments)}()}),[]);return Object(h.jsx)("div",{className:"overflow-x-auto md:-mx-6 lg:-mx-8 mt-10",children:Object(h.jsx)("div",{className:"py-2 align-middle inline-block min-w-full md:px-6 lg:px-8",children:Object(h.jsx)("div",{className:"overflow-hidden md:rounded-lg",children:r.map((function(e){var t,r=e.priority;return"Low"===r&&(t="bg-blue-100 text-blue-800"),"normal"===r&&(t="bg-green-100 text-green-800"),"High"===r&&(t="bg-red-100 text-red-800"),Object(h.jsx)("div",{className:"flex justify-start",children:Object(h.jsx)("div",{className:"w-full mb-2 border",children:Object(h.jsxs)("div",{className:"px-4 py-4",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{className:"font-semibold leading-tight text-2xl text-gray-800 hover:text-gray-800 ml-1",children:e.name}),Object(h.jsxs)("p",{className:" px-2",children:["Client: ",e.client.name]})]}),Object(h.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 m-1 rounded-full text-xs font-medium ".concat(t),children:e.priority}),Object(h.jsx)("p",{className:"text-gray-900 m-2",children:e.issue}),Object(h.jsx)("div",{className:"text-gray-700 text-sm font-bold p-2 m-2",children:Object(h.jsx)(o.b,{to:{pathname:"tickets/".concat(e._id),state:e},className:"float-right",children:"View Full Ticket"})})]})})},e.id)}))})})})},x=function(){var e=Object(i.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/tickets/all");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.default=function(){var e=Object(l.a)("fetchAllTickets",x),t=e.data,r=e.status;return Object(h.jsxs)("div",{className:" mx-auto pb-6 px-4 sm:px-6 lg:pb-16 lg:px-10 flex flex-col",children:[Object(h.jsx)("div",{className:"sm:px-6 md:px-8 ml-2",children:Object(h.jsx)("div",{className:"flex flex-row",children:Object(h.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"History"})})}),Object(h.jsxs)("div",{className:"flex flex-col",children:["loading"===r&&Object(h.jsxs)("div",{className:"min-h-screen flex flex-col justify-center items-center py-12 sm:px-6 lg:px-8",children:[Object(h.jsx)("h2",{children:" Loading data ... "}),Object(h.jsx)(u.a,{})]}),"error"===r&&Object(h.jsxs)("div",{className:"min-h-screen flex flex-col justify-center items-center py-12 sm:px-6 lg:px-8",children:[Object(h.jsx)("h2",{className:"text-2xl font-bold",children:" Error fetching data ... "}),Object(h.jsx)("img",{src:d.a,className:"h-96 w-96",alt:"error"})]}),"success"===r&&Object(h.jsx)("div",{children:0===t.tickets.length?Object(h.jsx)("div",{className:"min-h-screen flex flex-col justify-center items-center py-12 sm:px-6 lg:px-8",children:Object(h.jsx)("p",{children:"No tickets have been created"})}):Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"hidden sm:block",children:Object(h.jsx)(p,{tickets:t.tickets})}),Object(h.jsx)("div",{className:"sm:hidden",children:Object(h.jsx)(f,{tickets:t.tickets})})]},t.tickets.id)})]})]})}}}]);
//# sourceMappingURL=18.3030f7e4.chunk.js.map
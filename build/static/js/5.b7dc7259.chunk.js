(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[5],{373:function(e,t,n){"use strict";var a=n(219);t.a=a.a},399:function(e,t,n){"use strict";n.r(t);var a=n(8),c=n.n(a),r=n(16),i=n(0),o=n(364),l=n(363),s=n(37),u=n(358),d=n(31),j=n(32),h=n(10),b=n(361),m=n(373),f=n(362),p=n(1),x=function(e){var t=Object(i.useState)(!1),n=Object(h.a)(t,2),a=n[0],o=n[1],l=Object(i.useState)(e.client.name),u=Object(h.a)(l,2),d=u[0],j=u[1],x=Object(i.useState)(e.client.ContactName),O=Object(h.a)(x,2),v=O[0],g=O[1],w=Object(i.useState)(e.client.email),C=Object(h.a)(w,2),y=C[0],N=C[1],k=Object(i.useState)(e.client.number),E=Object(h.a)(k,2),S=E[0],T=E[1];console.log(e.client);var I=function(){var t=Object(r.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/v1/client/update",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({id:e.client._id,clientName:d,name:v,email:y,number:S})}).then((function(e){return e.json}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),z=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),o(!1),e.next=4,I();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{children:Object(p.jsxs)(s.a,{onClick:function(){o(!0)},children:["Update",Object(p.jsxs)(b.a,{visible:a,title:"Edit a users info",okText:"Update",cancelText:"Cancel",onCancel:function(e){e.stopPropagation(),o(!1)},onOk:z,children:[Object(p.jsx)(m.a,{children:Object(p.jsxs)("h5",{children:["Edit Client Name :"," ",Object(p.jsx)(f.a,{defaultValue:e.client.name,onChange:function(e){return j(e.target.value)},style:{width:300,marginLeft:18}})]})}),Object(p.jsx)(m.a,{children:Object(p.jsxs)("h5",{children:["Edit Contact Name :"," ",Object(p.jsx)(f.a,{defaultValue:e.client.contactName,onChange:function(e){return g(e.target.value)},style:{width:300}})]})}),Object(p.jsx)(m.a,{children:Object(p.jsxs)("h5",{children:["Edit Contact Email :"," ",Object(p.jsx)(f.a,{defaultValue:e.client.email,onChange:function(e){return N(e.target.value)},style:{width:300,marginLeft:5}})]})}),Object(p.jsx)(m.a,{children:Object(p.jsxs)("h5",{children:["Edit Contact Number :"," ",Object(p.jsx)(f.a,{defaultValue:e.client.number,onChange:function(e){return T(e.target.value)},style:{width:280}})]})})]})]})})},O=n(360),v=function(){var e=Object(i.useState)(!1),t=Object(h.a)(e,2),n=t[0],a=t[1],o=O.a.useForm(),l=Object(h.a)(o,1)[0],s=Object(i.useState)(""),u=Object(h.a)(s,2),d=u[0],m=u[1],x=Object(i.useState)(""),v=Object(h.a)(x,2),g=v[0],w=v[1],C=Object(i.useState)(""),y=Object(h.a)(C,2),N=y[0],k=y[1],E=Object(i.useState)(""),S=Object(h.a)(E,2),T=S[0],I=S[1],z=Object(i.useContext)(j.a).createClient,V=function(){var e=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!1),e.next=3,z(N,g,d,T);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{onClick:function(){return a(!0)},type:"button",className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:Object(p.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Object(p.jsx)("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})})}),Object(p.jsx)(b.a,{centered:!0,visible:n,title:"Add a new client",okText:"Create",cancelText:"Cancel",onCancel:function(){a(!1)},onOk:function(){l.validateFields().then((function(e){l.resetFields(),V(e)})).catch((function(e){console.log("Validate Failed:",e)}))},children:Object(p.jsxs)(O.a,{form:l,layout:"vertical",name:"form_in_modal",initialValues:{modifier:"public"},children:[Object(p.jsx)(O.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of your new client!"}],children:Object(p.jsx)(f.a,{placeholder:"Enter name here...",name:"name",onChange:function(e){return k(e.target.value)}})}),Object(p.jsx)(O.a.Item,{name:"contact name",label:"Contact Name",children:Object(p.jsx)(f.a,{placeholder:"Enter  here....",onChange:function(e){return w(e.target.value)}})}),Object(p.jsx)(O.a.Item,{name:"number",label:"Contact Number",children:Object(p.jsx)(f.a,{placeholder:"Enter number here...",onChange:function(e){return m(e.target.value)}})}),Object(p.jsx)(O.a.Item,{name:"email",label:"Contact Email",children:Object(p.jsx)(f.a,{placeholder:"Enter email address here...",onChange:function(e){return I(e.target.value)}})})]})})]})};t.default=function(){var e=Object(d.f)(),t=Object(i.useContext)(j.a),n=t.clients,a=t.getClients;Object(i.useEffect)((function(){function t(){return(t=Object(r.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/v1/auth/token",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){if(!1!==t.auth)return console.log("logged in");e.push("/login")}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(i.useEffect)((function(){a()}),[]);var h=function(){var e=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,e.prev=1,e.next=4,fetch("/api/v1/client/delete/".concat(n),{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),b=[{title:"Client Name",dataIndex:"name",key:"name",width:150},{title:"Contact Name",dataIndex:"contactName",key:"contactName",width:150,responsive:["md"]},{title:"Contact Email",dataIndex:"email",key:"email",width:50,responsive:["md"]},{title:"Contact Number",dataIndex:"number",key:"number",width:75},{key:"action",responsive:["md"],width:200,render:function(e){return Object(p.jsxs)(o.b,{size:"middle",children:[Object(p.jsx)(x,{client:e}),Object(p.jsx)(l.a,{title:"Are you sure you want to delete?",onConfirm:function(){return h(e)},children:Object(p.jsx)(s.a,{children:"Delete"})})]})}}];return Object(p.jsx)("div",{children:Object(p.jsx)("main",{className:"relative z-0 overflow-y-auto focus:outline-none",tabindex:"0",children:Object(p.jsxs)("div",{className:"py-6",children:[Object(p.jsxs)("div",{className:"flex flex-row max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[Object(p.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Clients"}),Object(p.jsx)("div",{className:"ml-3",children:Object(p.jsx)(v,{})})]}),Object(p.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:Object(p.jsx)("div",{className:"py-4",children:Object(p.jsx)(u.a,{dataSource:n,columns:b,Pagenation:!1,pagination:{defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","30"]}})})})]})})})}}}]);
//# sourceMappingURL=5.b7dc7259.chunk.js.map
{"version":3,"sources":["pages/admin/Main.js"],"names":["Main","useState","unClaimed","setUnClaimed","open","setOpen","complete","setComplete","online","setOnline","reverse","text","setText","data","setData","history","useHistory","useEffect","a","io","connect","socket","on","soc","fetch","method","headers","Accept","then","response","json","console","log","auth","push","fetchOpen","Authorization","localStorage","getItem","ContentType","res","result","fetchClosed","fetchUnissued","className","tabindex","title","value","system","cpu","loadAverage","uptime","freeMem","freeMemPercentage","totalMem","size","bordered","dataSource","pagination","defaultPageSize","showSizeChanger","pageSizeOptions","renderItem","item","Item"],"mappings":"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","file":"static/js/7.95a36cc1.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport { Card, Statistic, List } from \"antd\";\nimport moment from \"moment\";\n\nconst Main = () => {\n  const [unClaimed, setUnClaimed] = useState();\n  const [open, setOpen] = useState();\n  const [complete, setComplete] = useState();\n  const [online, setOnline] = useState(0);\n  const [text, setText] = useState([].reverse());\n  const [data, setData] = useState([]);\n\n  const history = useHistory();\n\n  // console.log(data)\n\n  useEffect(() => {\n    async function soc() {\n      const socket = await io.connect(\"/\");\n      socket.on(\"visitor enters\", (data) => setOnline({ data }));\n      socket.on(\"visitor exits\", (data) => setOnline({ data }));\n    }\n    soc();\n  }, []);\n\n  useEffect(() => {\n    async function soc() {\n      const socket = await io.connect(\"/\");\n      socket.on(\"file\", (data) => setText({ data }));\n    }\n    soc();\n  }, []);\n\n  useEffect(() => {\n    async function soc() {\n      const socket = await io.connect(\"/\");\n      socket.on(\"stats\", (data) => setData(data));\n    }\n    soc();\n  }, []);\n\n  useEffect(() => {\n    async function auth() {\n      await fetch(`/api/v1/auth/token`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n        },\n      })\n        .then((response) => response.json())\n        .then((response) => {\n          console.log(response);\n          const res = response;\n          if (res.auth === false) {\n            history.push(\"/login\");\n          } else {\n            return console.log(\"logged in\");\n          }\n        });\n    }\n    auth();\n    // eslint-disable-next-line\n  }, []);\n\n  const fetchOpen = async () => {\n    await fetch(`/api/v1/data/getallopen`, {\n      method: \"get\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        ContentType: \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        setOpen(result.result);\n      });\n  };\n\n  const fetchClosed = async () => {\n    await fetch(`/api/v1/data/getallcompleted`, {\n      method: \"get\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        ContentType: \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        setComplete(result.result);\n      });\n  };\n\n  const fetchUnissued = async () => {\n    await fetch(`/api/v1/data/unallocatedTickets`, {\n      method: \"get\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        ContentType: \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        setUnClaimed(result.result);\n      });\n  };\n\n  useEffect(() => {\n    fetchOpen();\n    fetchClosed();\n    fetchUnissued();\n  }, []);\n\n  return (\n    <div>\n      <main\n        className=\"relative z-0 overflow-y-auto focus:outline-none\"\n        tabindex=\"0\"\n      >\n        <div className=\"py-6\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\n            <h1 className=\"text-2xl font-semibold text-gray-900\">Dashboard</h1>\n          </div>\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\n            <div className=\"py-4\">\n              <div className=\"flex flex-row px-2 mx-auto justify-items-center \">\n                <div className=\"ml-1\">\n                  <Card>\n                    <Statistic title=\"Closed Tickets\" value={complete} />\n                  </Card>\n                </div>\n                <div className=\"ml-1\">\n                  <Card>\n                    <Statistic title=\"Open Tickets\" value={open} />\n                  </Card>\n                </div>\n                <div className=\"ml-1\">\n                  <Card>\n                    <Statistic title=\"Unissued Tickets\" value={unClaimed} />\n                  </Card>\n                </div>\n                <div className=\"ml-1\">\n                  <Card>\n                    <Statistic title=\"Online Users\" value={online.data} />\n                  </Card>\n                </div>\n                <div className=\"ml-1\">\n                  <Card>\n                    <Statistic title=\"System OS\" value={data.system} />\n                  </Card>\n                </div>\n                <div className=\"ml-1\">\n                  <Card>\n                    <Statistic title=\"Cpu Count\" value={data.cpu} />\n                  </Card>\n                </div>\n              </div>\n            </div>\n            <div className=\"flex py-1 px-3\">\n              <div className=\"flex:1\">\n                <div className=\"flex-col\">\n                  <div className=\"flex flex-row\">\n                    <div className=\"ml-1\">\n                      <Card>\n                        <Statistic\n                          title=\"Cpu Load Average 5mins %\"\n                          value={data.loadAverage}\n                        />\n                      </Card>\n                    </div>\n                    <div className=\"ml-1\">\n                      <Card>\n                        <Statistic title=\"Uptime\" value={data.uptime} />\n                      </Card>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex flex-row\">\n                  <div className=\"ml-1\">\n                    <Card>\n                      <Statistic title=\"Free Memory MB\" value={data.freeMem} />\n                    </Card>\n                  </div>\n                  <div className=\"ml-1\">\n                    <Card>\n                      <Statistic\n                        title=\"Free Memory %\"\n                        value={data.freeMemPercentage}\n                      />\n                    </Card>\n                  </div>\n                  <div className=\"ml-1\">\n                    <Card>\n                      <Statistic\n                        title=\"Total Memory MB\"\n                        value={data.totalMem}\n                      />\n                    </Card>\n                  </div>\n                </div>\n              </div>\n              <div className=\"flex:2 ml-5 h-2/4\">\n                <div className=\"h-2/4\">\n                  <List\n                    size=\"small\"\n                    bordered\n                    dataSource={text.data}\n                    pagination={{\n                      defaultPageSize: 10,\n                      showSizeChanger: true,\n                      pageSizeOptions: [\"15\", \"30\", \"40\"],\n                    }}\n                    renderItem={(item) => <List.Item>{item}</List.Item>}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default Main;\n"],"sourceRoot":""}
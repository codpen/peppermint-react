{"version":3,"sources":["pages/admin/Main.js"],"names":["Main","useState","unClaimed","setUnClaimed","open","setOpen","complete","setComplete","online","setOnline","reverse","text","setText","history","useHistory","useEffect","a","io","connect","socket","on","data","soc","fetch","method","headers","Accept","then","response","json","console","log","auth","push","fetchOpen","Authorization","localStorage","getItem","ContentType","res","result","fetchClosed","fetchUnissued","className","tabindex","title","value","size","bordered","dataSource","pagination","defaultPageSize","showSizeChanger","pageSizeOptions","renderItem","item","Item"],"mappings":"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","file":"static/js/7.e1340d89.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport io from \"socket.io-client\";\r\nimport { Card, Statistic, List } from \"antd\";\r\n\r\nconst Main = () => {\r\n  const [unClaimed, setUnClaimed] = useState();\r\n  const [open, setOpen] = useState();\r\n  const [complete, setComplete] = useState();\r\n  const [online, setOnline] = useState(0);\r\n  const [text, setText] = useState([].reverse());\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    async function soc() {\r\n      const socket = await io.connect(\"/\");\r\n      socket.on(\"visitor enters\", (data) => setOnline({ data }));\r\n      socket.on(\"visitor exits\", (data) => setOnline({ data }));\r\n    }\r\n    soc();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function soc() {\r\n      const socket = await io.connect(\"/\");\r\n      socket.on(\"file\", (data) => setText({ data }));\r\n    }\r\n    soc();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function auth() {\r\n      await fetch(`/api/v1/auth/token`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Accept: \"application/json\",\r\n        },\r\n      })\r\n        .then((response) => response.json())\r\n        .then((response) => {\r\n          console.log(response);\r\n          const res = response;\r\n          if (res.auth === false) {\r\n            history.push(\"/login\");\r\n          } else {\r\n            return console.log(\"logged in\");\r\n          }\r\n        });\r\n    }\r\n    auth();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const fetchOpen = async () => {\r\n    await fetch(`/api/v1/data/getallopen`, {\r\n      method: \"get\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n        ContentType: \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        setOpen(result.result);\r\n      });\r\n  };\r\n\r\n  const fetchClosed = async () => {\r\n    await fetch(`/api/v1/data/getallcompleted`, {\r\n      method: \"get\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n        ContentType: \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        setComplete(result.result);\r\n      });\r\n  };\r\n\r\n  const fetchUnissued = async () => {\r\n    await fetch(`/api/v1/data/unallocatedTickets`, {\r\n      method: \"get\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n        ContentType: \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        setUnClaimed(result.result);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchOpen();\r\n    fetchClosed();\r\n    fetchUnissued();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <main\r\n        className=\"relative z-0 overflow-y-auto focus:outline-none\"\r\n        tabindex=\"0\"\r\n      >\r\n        <div className=\"py-6\">\r\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\r\n            <h1 className=\"text-2xl font-semibold text-gray-900\">Dashboard</h1>\r\n          </div>\r\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\r\n            <div className=\"py-4\">\r\n              <div className=\"flex flex-row px-2 mx-auto justify-items-center \">\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"Closed Tickets\" value={complete} />\r\n                  </Card>\r\n                </div>\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"Open Tickets\" value={open} />\r\n                  </Card>\r\n                </div>\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"Unissued Tickets\" value={unClaimed} />\r\n                  </Card>\r\n                </div>\r\n                <div className=\"ml-1\">\r\n                  <Card>\r\n                    <Statistic title=\"Online Users\" value={online.data} />\r\n                  </Card>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex py-1 px-3\">\r\n              <div className=\"flex:1\">\r\n                <List\r\n                  size=\"small\"\r\n                  bordered\r\n                  dataSource={text.data}\r\n                  pagination={{\r\n                    defaultPageSize: 15,\r\n                    showSizeChanger: true,\r\n                    pageSizeOptions: [\"15\", \"30\", \"40\"],\r\n                  }}\r\n                  renderItem={(item) => <List.Item>{item}</List.Item>}\r\n                />\r\n              </div>\r\n              <div className=\"flex:2 ml-5\">\r\n                \r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n"],"sourceRoot":""}
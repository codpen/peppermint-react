(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{375:function(e,t,n){"use strict";var a=n(219);t.a=a.a},400:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n.n(a),c=n(14),s=n(0),o=n(365),i=n(364),u=n(37),l=n(359),d=n(31),j=n(32),b=n(10),f=n(362),h=n(375),m=n(140),p=n(1),x=function(e){var t=Object(s.useState)(e.user),n=Object(b.a)(t,2),a=n[0],i=(n[1],Object(s.useState)(e.user.name)),l=Object(b.a)(i,2),d=l[0],j=l[1],x=Object(s.useState)(e.user.email),O=Object(b.a)(x,2),g=O[0],v=O[1],w=Object(s.useState)(e.user.role),y=Object(b.a)(w,2),k=y[0],C=y[1],S=Object(s.useState)(!1),N=Object(b.a)(S,2),E=N[0],T=N[1],I=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/auth/edit",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({id:a._id,name:d,email:g,role:k})}).then((function(e){return e.json}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!1),g.toString(g),g.toLowerCase(),e.next=5,I();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{children:[Object(p.jsx)(u.a,{onClick:function(){T(!0)},children:"Edit User info & Role"}),Object(p.jsxs)(f.a,{visible:E,title:"Edit a users info",okText:"Update",cancelText:"Cancel",onCancel:function(){T(!1)},onOk:z,children:[Object(p.jsx)(h.a,{children:Object(p.jsxs)("h5",{children:["Edit Name :"," ",Object(p.jsx)("input",{type:"text",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",defaultValue:a.name,onChange:function(e){return j(e.target.value)}})]})}),Object(p.jsx)(h.a,{children:Object(p.jsxs)("h5",{children:["Edit Email :"," ",Object(p.jsx)("input",{type:"text",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",defaultValue:a.email,onChange:function(e){return v(e.target.value)}})]})}),Object(p.jsx)("h5",{children:"Edit Role : "}),Object(p.jsx)(m.a.Group,{buttonStyle:"solid",defaultValue:a.role,onChange:function(e){return C(e.target.value)},children:Object(p.jsxs)(o.b,{children:[Object(p.jsx)(m.a.Button,{value:"user",children:"User"}),Object(p.jsx)(m.a.Button,{value:"admin",children:"Admin"})]})})]})]})},O=n(213),g=function(e){var t=Object(s.useState)(!1),n=Object(b.a)(t,2),a=n[0],o=n[1],i=Object(s.useState)(e.user._id),l=Object(b.a)(i,2),d=l[0],j=(l[1],Object(s.useState)("")),h=Object(b.a)(j,2),m=h[0],x=h[1],g=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d,e.next=3,fetch("/api/v1/auth/resetPassword/".concat(t),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({password:m})}).then((function(e){return e.json()})).then((function(e){var t;!1===e.failed?O.b.success("Password updated"):(t=e.message,O.b.error("".concat(t)))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!1),e.next=3,g();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{children:[Object(p.jsx)(u.a,{onClick:function(){o(!0)},children:"Reset password"}),Object(p.jsx)(f.a,{visible:a,title:"Reset users password",okText:"Update",cancelText:"Cancel",onCancel:function(){o(!1)},onOk:v,children:Object(p.jsx)("input",{type:"password",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",onChange:function(e){return x(e.target.value)},placeholder:"Enter users new password"})})]})},v=n(361),w=function(){var e=Object(s.useState)(!1),t=Object(b.a)(e,2),n=t[0],a=t[1],o=v.a.useForm(),i=Object(b.a)(o,1)[0],u=Object(s.useState)(""),l=Object(b.a)(u,2),d=l[0],h=l[1],x=Object(s.useState)(""),O=Object(b.a)(x,2),g=O[0],w=O[1],y=Object(s.useState)(""),k=Object(b.a)(y,2),C=k[0],S=k[1],N=Object(s.useContext)(j.a).createUser,E=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!1),e.next=3,N(C,g,d);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{onClick:function(){return a(!0)},type:"button",className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:Object(p.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Object(p.jsx)("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})})}),Object(p.jsx)(f.a,{centered:!0,visible:n,title:"Create a new user",okText:"Create",cancelText:"Cancel",onCancel:function(){a(!1)},onOk:function(){i.validateFields().then((function(e){i.resetFields(),E(e)})).catch((function(e){console.log("Validate Failed:",e)}))},children:Object(p.jsxs)(v.a,{form:i,layout:"vertical",name:"form_in_modal",initialValues:{modifier:"public"},children:[Object(p.jsx)(v.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of your new user!"}],children:Object(p.jsx)("input",{type:"text",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Enter name here...",name:"name",onChange:function(e){return S(e.target.value)}})}),Object(p.jsx)(v.a.Item,{name:"email",label:"Email",children:Object(p.jsx)("input",{type:"text",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Enter email here....",onChange:function(e){return w(e.target.value)}})}),Object(p.jsx)(v.a.Item,{name:"password",label:"Password",children:Object(p.jsx)("input",{type:"password",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Enter password here...",onChange:function(e){return h(e.target.value)}})}),Object(p.jsx)(v.a.Item,{name:"modifier",className:"collection-create-form_last-form-item",children:Object(p.jsxs)(m.a.Group,{children:[Object(p.jsx)(m.a,{value:"user",children:"User"}),Object(p.jsx)(m.a,{value:"admin",children:"Admin"})]})})]})})]})};t.default=function(){var e=Object(d.f)(),t=Object(s.useContext)(j.a),n=t.users,a=t.getUsers;Object(s.useEffect)((function(){function t(){return(t=Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/v1/auth/token",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){if(console.log(t),!1!==t.auth)return console.log("logged in");e.push("/login")}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]);var b=function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,console.log(n),e.prev=2,e.next=5,fetch("/api/v1/auth/delete/".concat(n),{method:"DELETE",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){a()}),[]);var f=[{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"Role",dataIndex:"role",key:"role"},{key:"action",responsive:["md"],render:function(e,t){return Object(p.jsxs)(o.b,{size:"middle",children:[Object(p.jsx)(x,{user:t}),Object(p.jsx)(i.a,{title:"Are you sure you want to delete?",onConfirm:function(){return b(t)},children:Object(p.jsx)(u.a,{children:"Delete"})}),Object(p.jsx)(g,{user:t})]})}}];return Object(p.jsx)("div",{children:Object(p.jsx)("div",{children:Object(p.jsx)("main",{className:"relative z-0 overflow-y-auto focus:outline-none",tabindex:"0",children:Object(p.jsxs)("div",{className:"py-6",children:[Object(p.jsxs)("div",{className:"flex flex-row max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[Object(p.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Internal Users"}),Object(p.jsx)("div",{className:"ml-3",children:Object(p.jsx)(w,{})})]}),Object(p.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:Object(p.jsx)("div",{className:"py-4",children:Object(p.jsx)(l.a,{dataSource:n,columns:f,pagination:{defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","30"]}})})})]})})})})}}}]);
//# sourceMappingURL=4.7f80832f.chunk.js.map